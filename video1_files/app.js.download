"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e});var k,N,_,O,R,D,P,B,U,F,H,V,z,q,G,W,j,K,Y,J,Q,o,l,Z,X,ee,te,e,ne,u,t,ae,oe,ie,re,se,le,de,d,i,p,n,ce,m,ue,pe,r,me,fe,ge,ve,s,c,f,g=13,v=27,y="_kenytUserId_",h="_kenytIsNewUserId_",ye="_kenytviewstate_",T="MessageHub",he="_kenytsessionstate_",C=":",E={CONTACT_FORM:{Trigger:"Open Lead Form"},APPOINTMENT_FORM:{Trigger:"Open Appointment Form"},ADDRESS_FORM:{Trigger:"Open Address Form"},LATLONG_FORM:{Trigger:"Open GeoLocation Form"},FIREBASE_FORM:{Trigger:"Open Firebase Form"},FILE_UPLOAD:{Trigger:"Open Upload Form"},CALLER:{Trigger:"Open Caller"},OTP:{Trigger:"Open OTP Form"},GENERIC_FORM:{Trigger:"Open Generic Form"},NAVIGATE:{Trigger:"NavigateTo",Pattern:/^NavigateTo\s*:\s*\[.*\]\(.*\)$/i},SETTINGS_OVERRIDE:{Trigger:"UpdateUxSettings",Pattern:/^UpdateUxSettings\s*:\s*.*$/i},SET_LANGUAGE:{Trigger:"Set Language"},SET_SESSION:{Trigger:"Set Session"},NOTIFY_LEAD_CAPTURE:{Trigger:"Notify Lead Capture"},NOTIFY_TYPING:{Trigger:"Notify Typing"},OPEN_RAZORPAY_BUTTON:{Trigger:"Open Razorpay Button"}},b="phone::",S="Intl Tel Input Plugin",x="../ChatbotUI/external/IntlTelInput/utils.js",I="_EMPTY_",w="en",L="kenytUnreadMessage",M=/(http|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?/i,A=/\[.*\]\(.*\)/,Te=/[\d]{4,}/,Ce={TRACKING_ID:"UA-64989543-27",EVENT_INITIAL_LOAD:"initial_event",EVENT_DOCUMENT_READY:"document_ready",EVENT_COOKIES_DISABLED:"cookies_disabled",EVENT_LOAD_CHAT_REQUESTED:"load_chatbot_requested",EVENT_LOAD_CHAT_RECEIVED:"load_chatbot_received",EVENT_LOAD_CHAT_INTIME:"load_chatbot_intime",EVENT_VALID_BOT_ID:"valid_botid",EVENT_AUTO_MESSAGE_REQUESTED:"auto_message_requested",EVENT_AUTO_MESSAGE_SKIPPED:"auto_message_skipped",EVENT_AUTO_MESSAGE_RECEIVED:"auto_message_received",EVENT_FIRST_USER_REQUEST:"first_user_request",EVENT_INITIALIZE_CONNECTION:"initialize_connection",EVENT_FIRST_BOT_RESPONSE:"first_bot_response",EVENT_MESSAGE_SENT:"client_message_sent",EVENT_MESSAGE_RECEIVED:"client_message_received",EVENT_MESSAGE_DELAY:"reply_delay",EVENT_MESSAGE_UNSUCCESSFUl:"client_message_unsuccessful",EVENT_MESSAGE_ABANDONED:"client_message_abandoned",EVENT_MESSAGE_FAILED:"client_message_failed",EVENT_LOCATION_OBTAINED:"location_obtained",EVENT_LOCATION_DENIED:"location_denied",DISCONNECT_IDLE_USER:"disconnect_idle_user"},Ee=750,be="/signalr",Se="/api/botsetup/loadchatwindow",xe="",Ie="",we="/botapp",Le={PROD:"/dashboard",LOCAL:"http://localhost:4200"},Me=5,Ae=3,ke=1440,Ne={TYPING_INDICATOR:"TypingIndicator",SENDER_DETAILS:"MessageSenderInfo",OTP_FORM:"OTPForm",PHONE_NUMBER_FORM:"PhoneNumberForm",SHOW_MORE_BUTTON:"ShowMoreButton",SMALL_BUTTON_CARD:"SmallButtonCard",MEDIUM_BUTTON_CARD:"MediumButtonCard",VISITING_CARD:"VisitingCard",VERTICAL_CARD:"VerticalCard",CARD_BUTTON:"CardButton",HEADER_MENU_ITEM:"HeaderMenuItem",FILE_CARD:"FileCard",LOCATION_CARD:"LocationCard",FOOTER_MENU:"FooterMenu",INTERACTIVE_CARD:"InteractiveList",INTERACTIVE_MENU_CARD:"ShowInteractiveMenuButton"},_e="enable-on-bot-reply",Oe=[{text:"Afrikaans",value:"af",displayText:"Afrikaans"},{text:"Albanian",value:"sq",displayText:"shqipe"},{text:"Amharic",value:"am"},{text:"Arabic",value:"ar",displayText:"العَرَبِيَّة"},{text:"Armenian",value:"hy",displayText:"Հայերեն"},{text:"Azerbaijani",value:"az",displayText:"azərbaycan dili"},{text:"Basque",value:"eu",displayText:"euskara"},{text:"Belarusian",value:"be",displayText:"беларуская мова"},{text:"Bengali",value:"bn",displayText:"বাংলা"},{text:"Bosnian",value:"bs",displayText:"Bosanski Jezik"},{text:"Bulgarian",value:"bg",displayText:"български език"},{text:"Catalan",value:"ca",displayText:"català"},{text:"Cebuano",value:"ceb",displayText:"Cebuano"},{text:"Chadic",value:"ha",displayText:"Harshen Hausa"},{text:"Chinese (Mandarin)",value:"zh-CN",displayText:"中文"},{text:"Chinese(Traditional)",value:"zh-TW"},{text:"Corsican",value:"co",displayText:"Espanol - CO"},{text:"Croatian",value:"hr",displayText:"Hrvatski Jezik"},{text:"Czech",value:"cs",displayText:"český jazyk"},{text:"Danish",value:"da",displayText:"Dansk"},{text:"Dutch",value:"nl",displayText:"Nederlands"},{text:"English",value:"en"},{text:"Esperanto",value:"eo",displayText:"Esperanto"},{text:"Estonian",value:"et",displayText:"Eesti"},{text:"Filipino",value:"fl",displayText:"Pilipino"},{text:"Finnish",value:"fi",displayText:"Suomi"},{text:"French",value:"fr",displayText:"Français"},{text:"Frisian",value:"fy"},{text:"Galician",value:"gl",displayText:"Galego"},{text:"Georgian ",value:"ka",displayText:"ქართული"},{text:"German",value:"de",displayText:"Deutsch"},{text:"Greek",value:"el",displayText:"ελληνικά"},{text:"Gujarati",value:"gu",displayText:"ગુજરાતી"},{text:"Haitian Creole",value:"ht",displayText:"Kreyol Ayisyen"},{text:"Hausa",value:"ha ",displayText:"هَوُسَ"},{text:"Hawaiian",value:"haw"},{text:"Hebrew",value:"he",displayText:"עברית"},{text:"Hindi",value:"hi",displayText:"हिन्दी"},{text:"Hmong",value:"hmn",displayText:"Hmong"},{text:"Hungarian",value:"hu",displayText:"magyar"},{text:"Icelandic",value:"is",displayText:"Islenka"},{text:"Igbo",value:"ig",displayText:"Ásụ̀sụ̀"},{text:"Indonesian",value:"id",displayText:"Indonesia"},{text:"Irish",value:"ga",displayText:"Gaeilge"},{text:"Italian",value:"it",displayText:"Italiano"},{text:"Japanese",value:"ja",displayText:"日本語"},{text:"Javanese",value:"jv",displayText:"Basa Jawa"},{text:"Javanese",value:"jw"},{text:"Kannada",value:"kn",displayText:"ಕನ್ನಡ"},{text:"Kazakh",value:"kk",displayText:"қазақ тілі"},{text:"Khmer",value:"km    ",displayText:"ខ្មែរ,"},{text:"Korean",value:"ko",displayText:"한국어"},{text:"Kurdish",value:"ku"},{text:"Kyrgyz",value:"ky"},{text:"Lao",value:"lo",displayText:"ພາສາລາວ"},{text:"Latin",value:"la",displayText:"Latine"},{text:"Latvian",value:"lv",displayText:"latviešu valoda"},{text:"Lithuanian",value:"lt",displayText:"lietuvių kalba"},{text:"Luxembourgish",value:"lb"},{text:"Macedonian",value:"mk",displayText:"македонски јазик"},{text:"Malagasy",value:"mg",displayText:"Malagasy"},{text:"Malay",value:"ms",displayText:"Bahasa Melayu"},{text:"Malayalam",value:"ml",displayText:"മലയാളം"},{text:"Maltese",value:"mt",displayText:"Malti"},{text:"Maori",value:"mi",displayText:"Māori"},{text:"Marathi",value:"mr",displayText:"मराठी"},{text:"Mongolian",value:"mn",displayText:"монгол"},{text:"Myanmar(Burmese)",value:"my"},{text:"Nepali",value:"ne",displayText:"नेपाली"},{text:"Norwegian",value:"no",displayText:"Norsk"},{text:"Nyanja",value:"ny",displayText:"Chichewa"},{text:"Odia",value:"or",displayText:"ଓଡିଆ"},{text:"Pashto",value:"ps"},{text:"Persian",value:"fa"},{text:"Polish",value:"pl",displayText:"Polski"},{text:"Portuguese(Portugal, Brazil)",value:"pt",displayText:"Português"},{text:"Punjabi",value:"pa",displayText:"ਪੰਜਾਬੀ"},{text:"Romanian",value:"ro",displayText:"limba română "},{text:"Russian",value:"ru",displayText:"русский язык"},{text:"Samoan",value:"sm"},{text:"Scots Gaelic",value:"gd",displayText:"Gàidhlig na h-Alba"},{text:"Serbian",value:"sr",displayText:"српски језик"},{text:"Shona",value:"sn"},{text:"Sindhi",value:"sd"},{text:"Sinhala(Sinhalese)",value:"si",displayText:"සිංහල"},{text:"Slovak",value:"sk",displayText:"slovenčina"},{text:"Slovenian",value:"sl",displayText:"Slovenski Jezik"},{text:"Somali",value:"so",displayText:"Soomaali"},{text:"Spanish",value:"es",displayText:"Español"},{text:"Southern Sotho",value:"st",displayText:"Sesotho"},{text:"Sundanese",value:"su",displayText:"Basa Sunda"},{text:"Swahili",value:"sw",displayText:"Kiswahili"},{text:"Swedish",value:"sv",displayText:"Sverige"},{text:"Tagalog(Filipino)",value:"tl"},{text:"Tajik",value:"tg",displayText:"тоҷикӣ"},{text:"Tamil",value:"ta",displayText:"தமிழ்"},{text:"Telugu",value:"te",displayText:"తెలుగు"},{text:"Thai",value:"th",displayText:"ไทย"},{text:"Turkish",value:"tr",displayText:"Türkçe"},{text:"Ukrainian",value:"uk",displayText:"українська мова"},{text:"Urdu",value:"ur",displayText:"اُردُو"},{text:"Uzbek",value:"uz",displayText:"Oʻzbek"},{text:"Vietnamese",value:"vi",displayText:"Tiếng Việt"},{text:"Welsh",value:"cy"},{text:"Xhosa",value:"xh"},{text:"Yiddish",value:"yi",displayText:"ייִדיש"},{text:"Yoruba",value:"yo",displayText:"Ede Yorùbá"},{text:"Zulu",value:"zu",displayText:"isiZulu"}],Re={EMAIL_VALIIDATION_PATTERN:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,10}|[0-9]{1,5})(\]?)$/,PHONE_VALIDATION_SOURCE:S,URL_VALIIDATION_PATTERN:/^(http[s]?:\/\/)?(www\.)?(\w)+\.(\w)+([\/.][\w-#]*)*$/},De=Wa(),Pe=De+be,Be=De+Se,Ue=De+"/api/file/upload",Fe={None:0,Thumbnail:1,Hero:2,Image:3,Gif:4,Video:5,QuickLink:6,SmallButton:7,MediumButton:8,VisitingCard:9,VerticalCard:10,Location:11,File:12,FooterMenu:13,InteractiveList:101},He={UserMessage:1,AutoMessage:2,ManualMessage:3},Ve={UnreadMessage:"kenytUnreadMessage",ChatWindowClose:"kenytChatWindowClose",ChatWindowOpen:"kenytChatWindowOpen",FullScreenImage:"kenytFullScreenImage",NavigateToPage:"kenytNavigateToPage",ToggleFullScreen:"kenytToggleFullscreen",ForceFullHeight:"kenytForceFullHeight",TextColor:"kenytTextColor",IsWindowMinimizedResponse:"kenytIsWindowMinimizedResponse",WindowHover:"kenytWindowHover",GetPageTitle:"kenytPageTitle",GetReferrer:"kenytPageReferrer",Initialize:"kenytInitialize",FirebaseToken:"kenytFirebaseToken",PageInfoRequest:"kenytPageInfoRequest",PageInfoResponse:"kenytPageInfoResponse",CustomEventDispatch:"kenytCustomEventDispatch",SettingsUpdate:"kenytSettingsUpdate",UpdateChatBubbleColor:"kenytUpdateChatBubbleColor",UpdateAttentionMessage:"kenytUpdateAttentionMessage",UpdateBotPosition:"kenytUpdateBotPosition",MediaStreamingCommand:"kenytMediaStreamingCommand",SendMessage:"kenytSendMessage",ReportGoogleAnalyticsEvent:"reportGoogleAnalyticsEvent",OpenRazorpayForm:"kenytOpenRazorpayForm",SubmitRazorpayPayment:"kenytSubmitRazorpayPayment",FormSubmission:"kenytFormSubmission"},ze={Load:"kenyt_Load",ChatStart:"kenyt_ChatStart",ContactFormSubmit:"kenyt_ContactFormSubmit",GenericFormSubmit:"kenyt_GenericFormSubmit",UserMessage:"kenyt_UserMessage",UserQueryResponse:"kenyt_UserQueryResponse",ChatWindowClose:"Kenyt_ChatWindowClose"},qe={Form:"Form"},Ge={SessionCount:1},We=!1,je={},Ke={},$e=!0,Ye={},Je=!1,Qe={pageStartAt:null,isSkipped:!0,isSent:!1,isSentAck:!1,isReceived:!1,sentAt:null,receivedAt:null},Ze={FrameColor:"",FrameColorGradient:"",BubbleBackgroundColor:"",HeaderTitle:"Automated Live Chat",HeaderSubTitle:"Online",EnableRestartChat:"False",EnableSpeech:"False",HeaderFontSize:"",HeaderTextColor:"#ffffff",FontSize:"",FontFamily:"",UserChatBubbleColor:"",UserChatBubbleColorGradient:"",BotChatBubbleColor:"#ffffff",PlaceholderText:"Type your message...",ShowPoweredBy:"True",PoweredBy:{},BotTextColor:"#000",UserTextColor:"#000",BackgroundImage:"",BackgroundColor:"",CustomPanelCss:"",HeaderImage:"/api/botsetup/getimage?imagetype=chatbubble-icon&botid=",HeaderShowOnline:"False",DesktopMinimizeBotAtStart:"True",MobileMinimizeBotAtStart:"True",OpenWindowAfterMilliSeconds:"0",Languages:"",UserPersona:"you",BotPersona:"chatbot",AttentionMessage:"",LiveAgentCall:"False",HideMenuInHeader:"False",IdleTimeoutSeconds:0,WindowStyle:"style1"},Xe={adaptiveHeight:!0,dots:!1,mobileFirst:!0,arrows:!0,autoplay:!0,autoplaySpeed:5e3,rtl:!1},et=[],tt={},nt={headerMenu:{container:null,content:null},footerMenu:{container:null,content:null}},at=[],ot=!1,it=!0,rt=1,st=1,lt=!1,dt=!1,ct=!1,ut={senderDetailsView:null,indicatorView:null},pt={"See Details":"See Details",Submit:"Submit","None of the above":"None of the above","Contact Information":"Contact Information","Please enter your contact details":"Please enter your contact details",Name:"Name",Email:"Email",Phone:"Phone",Mobile:"Mobile"},mt={},ft={},gt="style1";function vt(e){if(e)for(var t in e)ft[t]=e[t]}vt(pt);var yt,ht,Tt,Ct,Et={audio:!0},bt=null,St={},xt=!1,It=null,wt={lastFocusedAt:null,idleTimeSec:0,isActiveSignalSent:!1,stopTimingTimeOut:null},Lt=!1;function Mt(){Nt()}window.dataLayer=window.dataLayer||[],Ft(),window.KENYT_API={currentForm:null,onFormInputChange:null},$(document).ready(function(){Bt("event",Ce.EVENT_DOCUMENT_READY),si(ze.Load,{botId:te}),console.debug("BotClient: "+te),k=document.querySelector("#chatWindow"),N=document.querySelector("#chatWindowHeader"),_=document.querySelector("#headerIconContainer"),O=document.querySelector("#headerImage"),R=document.querySelector("#headerOnlineIcon"),D=document.querySelector("#headerTitle"),P=document.querySelector("#headerSubTitle"),B=document.querySelector("#chatWindowBody"),F=document.querySelector("#chatInput"),H=document.querySelector("#chatActions"),V=document.querySelector("#sendButton"),z=document.querySelector("#speechButton"),q=document.querySelector("#callButton"),nt.headerMenu.container=document.querySelector("#menuContainer"),nt.footerMenu.container=document.querySelector("#footer-menu"),nt.footerMenu.optionsContainer=document.querySelector("#footer-menu-options"),nt.footerMenu.menuline=document.querySelector(".menu-line"),nt.footerMenu.hidden=!0,nt.footerMenu.container.addEventListener("click",function(){if(nt.footerMenu.container.classList.contains("footer-minimized"))An(nt.footerMenu.contentElement),nt.footerMenu.menuline.style.display="none";else{if(nt.footerMenu.container.classList.remove("open"),nt.footerMenu.container.classList.add("footer-minimized"),k.classList.remove("footer-menu"),nt.footerMenu.isOpen=!1,nt.footerMenu.referenceElement){var e=nt.footerMenu.optionsContainer.getElementsByClassName("interactive-menu-options");e&&0<e.length&&((e=e[0]).classList.add("d-none"),nt.footerMenu.referenceElement.appendChild(e))}nt.footerMenu.hidden&&nt.footerMenu.container.classList.add("footer-hidden"),nt.footerMenu.menuline.style.display="block"}}),nt.footerMenu.closeElement=document.querySelector("#footer-menu-closed"),nt.footerMenu.contentElement=document.querySelector("#footer-menu-content"),G=document.querySelector("#languageButton"),U=document.querySelector("#messageContainer"),W=document.querySelector("#poweredByText"),j=W.children[0],K=document.querySelector("#chatWindowFooter"),Y=document.querySelector("#headerMaximizeMinimizeButton"),J=document.querySelector("#headerCloseButton"),ce=document.querySelector("#stopSpeech"),Q={},pi(),oe=za(),te=Pt("botid"),ae="1"===Pt("test")||0<te.indexOf("-test"),ne=Pt("userid",oe),se=Pt("hash"),Ze.HeaderImage=(qa()?"":"/botapp")+Ze.HeaderImage+te,Ze.backgroundImage&&(Ze.BackgroundImage=(qa()?"":"/botapp")+Ze.BackgroundImage+te),ve=!1,de=ye+te+"_"+se,le=he+te+"_"+se,me=[],ge=vo(),Ka(dt=qa()),ge||qa()||Bt("event",Ce.EVENT_COOKIES_DISABLED,Eo("browser_info")),Ra();var e=Ha();Ge=e&&e.botUserWebContext?e.botUserWebContext:Ge,tt.previousStateLoaded=!1,e?(console.debug("Found previous state, restoring.."),Da(e,!0)):(me=[],console.debug("No previous state found")),tt.previousStateLoaded=!0;var t=Va();t?(console.debug("Found previous session state, restoring..."),Pa(t),it=!1,t.queryUserDenied&&(ne=null)):console.debug("No previous session state found");var n=!1,a=!1;if(me&&0!=me.length){if(t&&t.pageUrl!==oe&&(me.forEach(function(e){e.isUserMessage&&(ve=!0)}),ve?a=!(n=!1):(a=!(n=!0),Vo()),oe&&!oe.includes("?"))){var o=t.pageUrl,i=o.indexOf("?");0<i&&(oe+=o.substring(i))}}else a=!(n=!0);var r=Be+"?botId="+te,s=new XMLHttpRequest;if(s.open("POST",r,!0),s.setRequestHeader("Content-type","application/json"),!ie){ie={};var l=(v=new URL(window.location.href)).searchParams.keys(),d=!0,c=!1,u=void 0;try{for(var p,m=l[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var f=p.value,g=f;g.startsWith("context-")&&(g=g.substring(8),ie[g]=v.searchParams.get(f))}}catch(e){c=!0,u=e}finally{try{!d&&m.return&&m.return()}finally{if(c)throw u}}}if(!re){re={};var v,y=(v=new URL(window.location.href)).searchParams.keys(),h=!0,T=!1,C=void 0;try{for(var E,b=y[Symbol.iterator]();!(h=(E=b.next()).done);h=!0){var S=E.value,x=S;x.startsWith("user-")&&(x=x.substring(5),re[x]=v.searchParams.get(S))}}catch(e){T=!0,C=e}finally{try{!h&&b.return&&b.return()}finally{if(T)throw C}}}var I,w,L,M={IsTest:ae,SessionUserId:Z,IsNewSessionUserId:X,QueryClientUserId:ne,ConversationId:ee,ConversationLanguage:fe||"",TimezoneOffsetMinutes:-1*(new Date).getTimezoneOffset(),SourceUrl:oe,TriggerAutoMessage:n,InitializeConnection:a,ConversationContext:ie,User:re},A=JSON.stringify(M);s.onload=function(e){Ot(e)},Bt("event",Ce.EVENT_LOAD_CHAT_REQUESTED),St.requestedAt=new Date,s.send(A),Bt("event",n?Ce.EVENT_AUTO_MESSAGE_REQUESTED:Ce.EVENT_AUTO_MESSAGE_SKIPPED),(window.hasOwnProperty("webkitSpeechRecognition")||window.hasOwnProperty("SpeechRecognition"))&&((ue=new(window.webkitSpeechRecognition||window.SpeechRecognition)).lang="en-IN",ue.onerror=function(e){"no-speech"===e.error?console.warn("No speech detected"):(Ut({message:"Speech recognition error: "+e},!1),console.warn(e))},ue.onstart=function(e){console.debug("Speech recognition started"),ha("Listening... say something"),z.classList.add("blink")},ue.onend=function(e){console.debug("Speech Recognition ended"),ha(Q.PlaceholderText||Ze.PlaceholderText),z.classList.remove("blink")},ue.onnomatch=function(e){console.warn("Failed to recognize speech")},ue.onresult=function(e){console.debug("Speech recognition result"),console.debug(e);var t=e.results[0][0].transcript;console.debug("Recognized Speech: '"+t+"'"),Na(t)&&(console.debug(t),lt=!0,pn(t,t))},window.speechSynthesis&&(window.speechSynthesis.onerror=function(e){console.error("Error in speech synthesis"),console.error(e),Ut({message:"Text to speech error: "+e},!1)})),window.navigator&&(window.navigator.browserInfo=(w=navigator.userAgent,L=w.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(L[1])?"IE "+((I=/\brv[ :]+(\d+)/g.exec(w)||[])[1]||""):"Chrome"===L[1]&&null!=(I=w.match(/\b(OPR|Edge)\/(\d+)/))?I.slice(1).join(" ").replace("OPR","Opera"):(L=L[2]?[L[1],L[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(I=w.match(/version\/(\d+)/i))&&L.splice(1,1,I[1]),L.join(" ")))),zt(),pe={isInitializing:!1,isConnected:!1,tryingToReconnect:!1},Co()&&ao(Y)});var At=!1,kt=null;function Nt(){var e={BotClientId:m?m.BotId:0,ConversationId:ee,UserId:Z,IsTyping:"true"};pe&&pe.isConnected?(At||(At=!0,l.invoke("UserTypingIndicator",e)),kt&&clearTimeout(kt),kt=setTimeout(function(){return _t(e)},3e3)):Ht()}function _t(e){At=!1,e.IsTyping=!1,pe&&pe.isConnected?l.invoke("UserTypingIndicator",e):Ht()}function Ot(e){Bt("event",Ce.EVENT_LOAD_CHAT_RECEIVED),St.receivedAt=new Date;var t=!1;try{var n=JSON.parse(e.target.response);if(n){if(ae=n.IsTest,n.OrgBot&&(m=n.OrgBot,Bt("event",Ce.EVENT_VALID_BOT_ID)),n.ConversationId&&rn(n.ConversationId),n.Response&&(Zt(n.Response),Bt("event",Ce.EVENT_AUTO_MESSAGE_RECEIVED)),n.InitializeConnection&&(t=!0),ra(Ze),n.WindowConfiguration&&(n.WindowConfiguration.Properties&&(ra(Q=cn(n.WindowConfiguration.Properties)),xt=Q.EnableRestartChat,mt.HeaderTitle=Q.HeaderTitle||Ze.HeaderTitle,mt.HeaderSubTitle=Q.HeaderSubTitle||Ze.HeaderSubTitle),n.WindowConfiguration.Javascript&&n.WindowConfiguration.Javascript.forEach(function(e){var t=document.createElement("script");t.setAttribute("src",e),t.type="text/javascript",document.head.appendChild(t)})),n.QueryUserDetails){var a=document.createElement("div"),o=document.createElement("p");if(o.innerText="Would you like to continue as",a.appendChild(o),n.QueryUserDetails.MaskedEmail){var i=document.createElement("p");i.innerText=n.QueryUserDetails.MaskedEmail,a.appendChild(i)}if(n.QueryUserDetails.MaskedPhone){var r=document.createElement("p");r.innerText=n.QueryUserDetails.MaskedPhone,a.appendChild(r)}var s=document.createElement("div");s.classList.add("card-thumbnail","text-center","mt-1"),a.appendChild(s);var l=document.createElement("div");l.classList.add("option-pill","pointer"),l.innerText="Yes",s.appendChild(l);var d=document.createElement("div");d.classList.add("option-pill","pointer"),d.innerText="No",s.appendChild(d),l.addEventListener("click",function(e){n&&n.QueryUserId&&on(n.QueryUserId),window.setTimeout(function(){pn("",null,!0,!0)},0),l.disabled=!0,d.disabled=!0}),d.addEventListener("click",function(e){u=!0,n&&n.SessionUserId&&on(n.SessionUserId),window.setTimeout(function(){pn("",null,!0,!0)},0),l.disabled=!0,d.disabled=!0});var c=wa();c.classList.add("w-95"),c.appendChild(a),oa(c)}else n.SessionUserId&&on(n.SessionUserId,n.IsNewSessionUserId);n.LanguageSettings&&sn(n.LanguageSettings)}}catch(e){e.message="load chatbot error:: "+(e&&e.message||""),Ut(e)}(t&&Ht(),St.requestedAt&&St.receivedAt)&&((St.receivedAt.valueOf()-St.requestedAt.valueOf())/1e3<Ae&&Bt("event",Ce.EVENT_LOAD_CHAT_INTIME));B.classList.remove("d-none")}function Rt(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(function(e){console.debug(e),f=e.coords,Bt("event",Ce.EVENT_LOCATION_OBTAINED),pn("Coordinates::"+e.coords.latitude+" "+e.coords.longitude)},function(e){pn("Coordinates denied by user"),console.warn("[Kenyt.AI] Location permission denied"),Bt("event",Ce.EVENT_LOCATION_DENIED)},{enableHighAccuracy:!0})}function Dt(){so(Ve.FirebaseToken)}function Pt(e,t){return t=t||window.location.href,new URL(t).searchParams.get(e)}function Bt(){window.dataLayer.push(arguments)}function Ut(e,t){var n=e&&e.lineno||"0",a=e&&e.colno||"0",o="["+(e&&e.filename||"unknown-file")+":"+n+":"+a+"] "+(e&&e.message||"null");qa()||Bt("event","exception",{description:o,fatal:t||!1}),console.debug(new Date+" "+o)}function Ft(){var e=Pt("botid");qa()&&(window["ga-disable-"+Ce.TRACKING_ID]=!0),Bt("js",new Date);var t=Pt("googleAnalyticsId");t||(t=Ce.TRACKING_ID),Bt("config",t,{custom_map:{dimension1:"botClientId"}}),e&&Bt("event",Ce.EVENT_INITIAL_LOAD,{botClientId:e}),window.addEventListener("error",function(e){Ut(e,!1)})}function Ht(){if(pe&&!pe.isInitializing){pe.isInitializing=!0,yo("Initializing connection");(o=$.hubConnection(Pe)).qs="botid="+te,qa()&&(o.logging=!0),o.connectionSlow(function(){console.warn("[Kenyt.AI] Connection is slow, may get disconnected"),Bt("event","connection_slow",Eo("connection"))}),o.reconnecting(function(){pe.tryingToReconnect=!0,pe.isConnected=!1,pe.reason="Reconnecting",yo("Reconnecting..."),console.warn("[Kenyt.AI] Lost connection to server, trying to reconnect..."+new Date),Bt("event","connection_lost",Eo("connection"))}),o.reconnected(function(){pe.tryingToReconnect=!1,pe.isConnected=!0,yo(pe.reason="Reconnected"),ho(),console.warn("[Kenyt.AI] Reconnected to server..."+new Date),Bt("event","reconnected",Eo("connection")),go()}),(l=o.createHubProxy(T)).on("BotReply",Zt),l.on("ManualReply",Xt),l.on("Error",an),l.on("NotifyAgentJoin",$o),l.on("NotifyAgentExit",Yo),l.on("NotifyWebRtcSignal",Ti),l.on("ChangeLanguage",sn),Vt($t,Yt,!1),o.disconnected(function(){if(o.lastError){var e=new Date;console.log("Disconnected at "+e),console.log("Disconnected. Reason: "+o.lastError.message);var t=void 0;t=pe.tryingToReconnect?"Disconnected after reconnecting failed;":"Disconnected without reconnecting;",t=o.lastError.message||t,console.error("[Kenyt.AI] "+t),pe.isConnected=!1,pe.tryingToReconnect=!1,pe.reason="disconnected",ho(),ve&&(yo("Connection disconnected, Reconnecting in 5 secs..."),window.setTimeout(function(){Ht()},5e3),t="(Reconnecting) "+t),Ut({message:"Connection Disconnected: "+t},!0)}})}}function Vt(e,t,n){n?(Bt("event","forced_longpolling"),o.start({transport:"longPolling"}).done(e).fail(t)):o.start().done(e).fail(t)}function zt(){F.addEventListener("keydown",na),F.addEventListener("input",Mt),F.addEventListener("focus",function(){Co()&&No(),po(B)}),V.addEventListener("click",aa),z.addEventListener("click",Zo),q&&q.addEventListener("click",function(e){Xo()}),Y.addEventListener("click",function(e){e.stopPropagation(),Wt();var t=Y.getAttribute("data-toggle");Mo(),Bt("event","Button_Minimize_Maximize",Eo("user_interaction",null,t))}),J.addEventListener("click",Sa),window.addEventListener("beforeunload",Jt),P.addEventListener("click",Sa),D.addEventListener("click",Sa),O.parentElement.addEventListener("click",Sa),document.addEventListener("keydown",function(e){var t=void 0;"key"in e?"Escape"!==e.key&&"Esc"!==e.key||(t=!0):t=e.keyCode===v,t&&Sa(),Wt()}),document.addEventListener("click",function(e){Wt()}),window.addEventListener("message",function(e){if("object"===a(e.data)&&e.data.type){var t=e.data;if(t.type===Ve.IsWindowMinimizedResponse)$e=t.value,Ua(),$e||Wt();else if(t.type===Ve.WindowHover)Wt();else if(t.type===Ve.GetPageTitle)Ye.pageTitle=t.value;else if(t.type===Ve.GetReferrer)Ye.pageReferrer=t.value;else if(t.type===Ve.PageInfoResponse)t.value&&To(t.value);else if(t.type===Ve.SettingsUpdate)t.value&&ra(t.value,!1,!0);else if(t.type===Ve.MediaStreamingCommand)Ci(t.value);else if(t.type===Ve.SendMessage){var n=t.value;n.messageToSend?un(n):pn(n,"",!1,!0)}else if(t.type===Ve.ReportGoogleAnalyticsEvent)qa()||(t.value.isException?Bt("event",t.value.eventName,t.value.details):Bt("event",t.value.eventName));else if(t.type===Ve.SubmitRazorpayPayment){un({messageToSend:"Kcomplete paymenttransaction",displayMessage:"Payment completed",payload:t.value}),yi.removeRazorpayButton()}else t.type===Ve.FirebaseToken&&t.value&&pn("save firebase app token","",!1,!1,!1,t.value)}})}function qt(){if(o)try{o.stop()}catch(e){console.debug("Manual disconnection failed")}}function Gt(){var e=document.hasFocus();wt&&wt.idleTimeSec&&pe.isConnected&&wt.lastFocusedAt&&!e&&(((new Date).valueOf()-wt.lastFocusedAt.valueOf())/1e3>wt.idleTimeSec&&(qt(),Bt("event",Ce.DISCONNECT_IDLE_USER),pe.isConnected=!1,pe.tryingToReconnect=!1,pe.reason="idle",ho(),yo("Connection disconnected (Idle User)",!0),document.getElementById("chatWindow").addEventListener("focus",Kt)))}function Wt(){if(wt){wt.lastFocusedAt=new Date;var e={BotClientId:m?m.BotId:0,ConversationId:ee,UserId:Z,IsActive:"true"};pe&&pe.isConnected?(wt.isActiveSignalSent||(wt.isActiveSignalSent=!0,l.invoke("SendUserActivity",e)),wt.stopTimingTimeOut||clearTimeout(wt.stopTimingTimeOut),wt.stopTimingTimeOut=setTimeout(function(){jt(e)},5e3)):Ht()}Kt()}function jt(e){wt.isActiveSignalSent=!1,e.IsActive=!1,pe&&pe.isConnected?l.invoke("SendUserActivity",e):Ht()}function Kt(){document.getElementById("chatWindow").removeEventListener("focus",Kt),!pe.isConnected&&pe.reason&&"idle"===pe.reason&&Ht()}function $t(){if(Je=!1,Bt("event",o&&o.transport&&o.transport.name||"unknown",Eo("transport_type")),ho(),pe.isConnected=!0,pe.tryingToReconnect=!1,pe.isInitializing=!1,m){var e={BotClientId:m.BotId,Conversation:{ConversationId:ee},User:{UserId:Z}};l.invoke("Subscribe",e),go()}}function Yt(e){pe.isInitializing=!1,console.debug("connection failed"),console.debug(arguments),e.message=e.message||"",e.message="Failed Server Connection: "+e.message,Ut(e)}function Jt(){qt();var e=Ha();e&&e.messages&&(me=e.messages),Ua()}function Qt(){}function Zt(t){if(console.debug(t),Lt=!1,t){if(i=new Date,d){var e=(i.valueOf()-d.valueOf())/1e3;Ae<e&&Bt("event",Ce.EVENT_MESSAGE_DELAY,Eo("messages",null,e))}c&&!s&&(s=!0,Bt("event",Ce.EVENT_FIRST_BOT_RESPONSE)),t.ClearChat&&Vo(),Ln(t.BotMenu),t.Messages&&0<t.Messages.length?(t.Messages.forEach(function(e){e.DisplayName=t.DisplayName,e.IsPartial=t.IsPartial,Tn(e)}),Ua()):gn(),ve&&Bt("event",Ce.EVENT_MESSAGE_RECEIVED,Eo("messages"));var n=document.getElementsByClassName(_e);if(n)for(var a=0;a<n.length;a++)tn(n[a]);si(ze.UserQueryResponse,{query:t.QueryScore})}}function Xt(e){var t={Text:e.Text,RichCards:[],CardsType:Fe.None,DisplayName:e.SenderName};t.Text&&E.SETTINGS_OVERRIDE.Pattern.test(t.Text.trim())?ra(Po(t.Text),!0):(t.Text&&(Sn(t),mo(t.Text)),e.Suggestion&&(e.Suggestion.DisplayName=e.SenderName,Sn(e.Suggestion),mo(e.Suggestion.Text)))}function en(e,t,n,a){console.debug("Received values from form"),console.debug(t),nn(e.target,[_e]);var o={},i=!0;t.forEach(function(e){var t=e.inputElementRef?e.inputElementRef.value:"";if(t&&"checkbox"===e.datatype&&(e.inputElementRef.checked||(t="")),e.isMandatory||Na(t)){e.validationPattern&&!Wo(e.validationPattern)&&(e.validationPattern=new RegExp(e.validationPattern)),e.antiValidationPattern&&!Wo(e.antiValidationPattern)&&(e.antiValidationPattern=new RegExp(e.antiValidationPattern));var n=!0;(n=e.validationPattern?e.validationPattern.test(t):Na(t))&&e.antiValidationPattern&&(n=!e.antiValidationPattern.test(t)),e.validationSource&&e.pluginObj&&e.validationSource===S&&(n=e.pluginObj.isValidNumber(),t=e.pluginObj.getNumber()),n?(console.debug("Setting User."+e.field+" = "+t),oo(e),o[e.field]=t):(console.debug("Form not valid"),io(e),i=!1)}});var r=!0;if(i){var s={};if(n)if(s.submit=n,s.values=o,a&&"values"===a){var l=[];Object.keys(o).forEach(function(e){l.push(""+o[e])});var d=l.join("\n");Na(s.payload=d)&&(pn(n,null,!1,!1,!1,d),r=!1)}else 0<Object.keys(o).length&&(pn(n,null,!1,!1,!1,o),r=!1);else{var c=ro(o);Na(c)&&(pn(c,null,!1,!0),r=!1,s.csvString=c)}si(ze.GenericFormSubmit,s)}r&&tn(e.target)}function tn(e){e&&e.classList&&(e.disabled=!1,e.classList.remove(_e))}function nn(t,e){t&&t.classList&&(t.disabled=!0,e&&e.forEach(function(e){return t.classList.add(e)}))}function an(e){console.error(e),e&&(e.message=e.message||"",e.message="Handle Error: "+e.message),Ut(e)}function on(e,t){return console.debug("Received UserId: "+e),Z=e,X=!!t,Ua(),!0}function rn(e){return console.debug("Received ConversationId: "+e),ee=e,so(Ve.Initialize,ee),Ua(),!0}function sn(e){if(e){if(console.debug("Received language settings from server"),console.debug(e),e.LanguageCode&&bo(e.LanguageCode,e.PreventHiMessage),e.Personas&&!jo(e.Personas))for(var t in e.Personas)Oo(t,e.Personas[t],!0);else Oo("user",Q.UserPersona,!0),Oo("bot",Q.BotPersona,!0);vt(e.Buttons&&!jo(e.Buttons)?e.Buttons:pt);var n=void 0;n=e.WindowContents&&!jo(e.WindowContents)?e.WindowContents:mt,e.WindowContents&&(ra(n,!0),so(Ve.UpdateAttentionMessage,n.AttentionMessage)),ln(e.RightToLeft)}}function ln(e){var t=e?"rtl":"ltr";document.documentElement&&(dn()!=t&&(document.documentElement.setAttribute("dir",t),Xe.rtl=!!e))}function dn(){var e="ltr";if(document.documentElement){var t=document.documentElement.getAttribute("dir");t&&(e=t)}return e}function cn(a){var o={};return a&&Object.keys(a).forEach(function(e){var t=a[e].Value,n=a[e].Key;n in Ze&&(o[n]=t)}),o}function un(e){pn(e.messageToSend,e.displayMessage,e.isAutoMessage,e.preventMessageRender,e.isHidden,e.payload,e.payloadType,e.isPostback)}function pn(e,t,n,a,o,i,r,s){if((n||!e||0!==e.trim().length)&&!Lt){n||(Wt(),X=!1);var l=void 0;if(t&&!a){l=Ia(t,'<span class="fa fa-spin fa-circle-o-notch"></span> sending..'),"user"!==p&&(Ao("user",co(),!0),p="user"),oa(l),fn(Ke.name)}re.UserId=Z;var d={RequestType:n?He.AutoMessage:He.UserMessage,Text:e,IsPostback:s,BotClientId:m?m.BotId:0,Conversation:{IsLocal:dt,SourceUrl:oe,ConversationId:ee,Context:ie},User:re,IsTest:ae,ConversationLanguage:fe||"",IsHidden:!!o};i&&(d.Payload=i,r&&(d.PayloadType=r)),Qe.pageStartAt=new Date,pe.isConnected?mn(d,l,t,a):(console.warn("[Kenyt.AI] Connection not yet initiated, suspending message.."),li(d,l||null,t,a),Ht())}}function mn(a,o,i,r,s){if(l&&!Lt){if(s||(s=0),console.debug("Sending message to server"),console.debug("BotClientName: "+te),console.debug(a),c||a.RequestType!=He.UserMessage||(c=!0,Bt("event",Ce.EVENT_FIRST_USER_REQUEST)),!ve&&a.RequestType!==He.AutoMessage){ve=!0,si(ze.ChatStart,{messageText:i||a.Text});var e=ai();zo(e)&&(a.BrowserInformation=e)}Z&&!a.User.UserId&&(a.User.UserId=Z),ee&&!a.Conversation.ConversationId&&(a.Conversation.ConversationId=ee),a.Conversation.TimezoneOffsetMinutes=-1*(new Date).getTimezoneOffset(),a.BotUserWebContext=Ge,Lt=!0,l.invoke("UserMessage",m,a).done(function(e){if(Lt=!1,e)d=new Date,yn(o),a.RequestType===He.AutoMessage&&(Qe.isSentAck=!0),a.RequestType===He.UserMessage&&(ct||ae||window.setTimeout(function(){so(Ve.PageInfoRequest)},100),si(ze.UserMessage,{messageText:a.Text}));else{if(yo("Send failed. Reconnecting..."),window.setTimeout(function(){Ht()},5e3),a.RequestType===He.UserMessage)if(s<3){li(a,o,i,r,"",s+1),r=!0;var t=a.BotClientId+"_"+a.Text;Bt("event",Ce.EVENT_MESSAGE_UNSUCCESSFUl,Eo("user_interaction",null,t))}else{var n=a.BotClientId+"_"+a.Text;Bt("event",Ce.EVENT_MESSAGE_ABANDONED,Eo("user_interaction",null,n))}pe.isConnected=!1,pe.reason="UserMessageFalse"}}).fail(function(e){if(Lt=!1,yo("Send failed. Reconnecting..."),window.setTimeout(function(){Ht()},5e3),a.RequestType===He.UserMessage)if(s<3){li(a,o,i,r,"",s+1),r=!0;var t=a.BotClientId+"_"+a.Text;Bt("event",Ce.EVENT_MESSAGE_UNSUCCESSFUl,Eo("user_interaction",null,t))}else{var n=a.BotClientId+"_"+a.Text;Bt("event",Ce.EVENT_MESSAGE_ABANDONED,Eo("user_interaction",null,n))}pe.isConnected=!1,pe.reason="UserMessageFail",hn(e),console.debug("Connection lost, Suspending message.."),r=!0}),r||me.push({id:rt++,isUserMessage:!0,message:a.Text,displayMessage:i,messageTimestamp:co()}),bn(),ve&&Bt("event",Ce.EVENT_MESSAGE_SENT,Eo("messages")),Ua()}else console.error("[Kenyt.AI] Cannot send message - HubProxy is null")}function fn(e){gn();var t=vn(e);ut.indicatorView=t[0],ut.senderDetailsView=t[1],U.appendChild(ut.senderDetailsView),U.appendChild(ut.indicatorView)}function gn(){ut.senderDetailsView&&(ut.senderDetailsView.remove(),ut.senderDetailsView=null),ut.indicatorView&&(ut.indicatorView.remove(),ut.indicatorView=null)}function vn(e){var t=document.createElement("div"),n=wa();n.appendChild(ii(Ne.TYPING_INDICATOR)),t.classList.add("col-12"),t.appendChild(n);var a=ii(Ne.SENDER_DETAILS);return a.querySelector("[data-persona]").textContent=e,[t,a]}function yn(e){if(e){var t=e.querySelector(".message-timestamp");t&&t.remove()}}function hn(e){console.debug("Sending message failed"),e&&(console.error(e),e.message=e.message||"",e.message="Failed Message: "+e.message,Ut(e))}function Tn(e){0<et.length?et.push(e):0<e.SendWithDelayMs?(et.push(e),window.setTimeout(function(){Cn()},e.SendWithDelayMs)):0<e.SendOnSilenceMs?(et.push(e),window.setTimeout(function(){Cn()},10)):Sn(e)}function Cn(){if(0<et.length){var e=et.splice(0,1)[0];0<e.SendOnSilenceMs?En(e.SendOnSilenceMs,function(){Sn(e),mo(e.Text)}):(Sn(e),mo(e.Text)),0<et.length&&0===et[0].SendWithDelayMs?Cn():0<et.length&&0<et[0].SendWithDelayMs?window.setTimeout(function(){Cn()},et[0].SendWithDelayMs):console.debug("No items in message queue")}}function En(e,t){bn(),r=window.setTimeout(function(){t()},e)}function bn(){r&&(window.clearTimeout(r),r=0)}function Sn(e){fn("bot"===e.DisplayName?Ke.name:e.DisplayName),window.setTimeout(function(){gn(),console.debug(e),xn(e,!1),p=e.DisplayName,me.push({id:rt++,isUserMessage:!1,message:e,messageTimestamp:co(),displayMessage:null}),Ua()},Ee)}function xn(e,t){if(e.IsPartial&&It)In(e);else{if(e.DisplayName===p||t||Ao(e.DisplayName,co()),e.Command&&e.Command.Name)if(e.Command.Name===E.CONTACT_FORM.Trigger)Fo((o=mi.getFormDetailsFromCommand(e.Command)).template,e.DisplayName),Bo(o.template,o.setttings);else if(e.Command.Name===E.APPOINTMENT_FORM.Trigger){Fo((o=mi.getFormDetailsFromCommand(e.Command)).template,e.DisplayName),Bo(o.template,o.setttings)}else if(e.Command.Name===E.ADDRESS_FORM.Trigger){Fo((o=mi.getFormDetailsFromCommand(e.Command)).template,e.DisplayName),Bo(o.template,o.setttings)}else if(e.Command.Name===E.LATLONG_FORM.Trigger)t||Rt();else if(e.Command.Name===E.FIREBASE_FORM.Trigger)t||Dt();else if(e.Command.Name===E.FILE_UPLOAD.Trigger){var a=Uo(e.Command.Value),r=ri();r.onSubmit=function(e){e.preventDefault();var t=e.target.getElementsByTagName("button");if(t&&t.length)for(var n=0;n<t.length;n++)nn(t[n]);var o=!0,i=[];r.fields.forEach(function(a){var t=[];t.push({inputElementRef:a.inputElementRef,feedbackElementRef:a.feedbackElementRef}),a.extraInputs&&a.extraInputs.forEach(function(e){t.push(e)}),t.forEach(function(e){var t=e.inputElementRef.value;if(a.isMandatory&&0==i.length||Na(t)){var n=Na(t);if(n&&"file"==a.datatype){20971520<e.inputElementRef.files[0].size&&(n=!1)}n?(console.debug("Setting User."+a.field+" = "+t),oo(e),i.push(e.inputElementRef.files[0])):(console.debug("Form not valid"),io(e),o=!1)}})}),o||(i=[]),wn(i,a,e)},Bo(r,a),Fo(r,e.DisplayName)}else if(e.Command.Name===E.CALLER.Trigger)t||hi(e);else if(e.Command.Name===E.OTP.Trigger){if(e.Command.Value){var n=null;try{n=JSON.parse(e.Command.Value).phone}catch(e){console.error("Error parsing command value",e)}oa(La(Kn(n)))}}else if(e.Command.Name===E.GENERIC_FORM.Trigger){var o;if(e.Command.Value)Fo((o=mi.getFormDetailsFromCommand(e.Command)).template,e.DisplayName),Bo(o.template,o.setttings)}else if(e.Command.Name===E.NAVIGATE.Trigger){if(!t){var i={url:e.Command.Value};so(Ve.NavigateToPage,i)}}else if(e.Command.Name===E.SETTINGS_OVERRIDE.Trigger){ra(Po(e.Command.Value),!0)}else if(e.Command.Name===E.SET_SESSION.Trigger)t||wo(Uo(e.Command.Value));else if(e.Command.Name===E.NOTIFY_LEAD_CAPTURE.Trigger){if(!t){var s=Uo(e.Command.Value);si(ze.ContactFormSubmit,s)}}else if(e.Command.Name===E.OPEN_RAZORPAY_BUTTON.Trigger){var l=Uo(e.Command.Value);l.FrameColor=Ca(),yi.addRazorpayButton(l)}else if(e.Command.Name===E.NOTIFY_TYPING.Trigger){var d=Uo(e.Command.Value);d.isTyping?fn(d.name):gn()}if(e.Text||0<e.RichCards.length){var c=wa(e.Text,e.RichCards,e.CardsType,e.ContentType,e.XPath||"",e.Name);e.CardsType&&e.CardsType===Fe.FooterMenu&&(nt.footerMenu.content=e),oa(c),lt&&Na(e.Text)&&ti(e.Text)}}}function In(e){e&&e.RichCards&&Nn(e.RichCards,e.CardsType)}function wn(t,n,a){if(t&&0<t.length){var e=t[0];t.shift();var o=new FormData;o.append("UploadFile",e);var i=n.FailureCallback||"submit file failure",r={};r.FileName=e.name,$.ajax({url:Ue+"?botId="+te+"&userId="+Z,type:"POST",data:o,success:function(e){e&&e.item2?pn(n.SubmitCallback||e.item1,null,!1,!0,!1,e.item2,"file"):pn(i,null,!1,!0,!1,r)},error:function(e){r.message=e,pn(i,null,!1,!0,!1,r)},complete:function(e){wn(t,n,a)},cache:!1,contentType:!1,processData:!1})}else{var s=a.target.getElementsByTagName("button");if(s&&s.length)for(var l=0;l<s.length;l++)tn(s[l])}}function Ln(e){e&&e.HeaderMenu&&Mn(e.HeaderMenu)}function Mn(e){if(nt.headerMenu.container&&e&&e.RichCards){nt.headerMenu.content=e;var o=nt.headerMenu.container.getElementsByClassName("dropdown-menu");if(0<o.length){var i=e.RichCards,r=0;i&&i.length&&i.forEach(function(e){if(e){r++;var t=Un(e,Ne.HEADER_MENU_ITEM,r,i.length),n=t.innerText,a=t.getAttribute("message");a||(a=t.innerText),t.addEventListener("click",function(){pn(a,n)}),o[0].appendChild(t)}});var t=Un({Title:"Restart Chat",Image:"icon:refresh"},Ne.HEADER_MENU_ITEM,r,i.length);t.setAttribute("id","k-chat-restart"),t.addEventListener("click",function(){Lo()}),o[0].appendChild(t)}}}function An(e,t){var n=document.getElementById("footer-menu");if(e&&(tt.previousStateLoaded||nt.footerMenu.isOpened)){var a=e.getElementsByClassName("interactive-menu-options");if(a&&0<a.length)a=a[0],nt.footerMenu.optionsContainer.appendChild(a),a.classList.remove("d-none"),n.classList.remove("footer-hidden"),t=t||"Menu",document.getElementById("footer-menu-title").innerText=t,document.getElementById("chatWindow").classList.add("footer-menu"),n.classList.add("open"),n.classList.remove("footer-minimized"),nt.footerMenu.menuline.style.display="none",nt.footerMenu.isOpen=!0,nt.footerMenu.referenceElement=e}}function kn(e,t,n,a){if(0<e.length){var o=document.createElement("div"),i=void 0;return t===Fe.None||t===Fe.Thumbnail?(i=e[0].Image?Hn(e):Do(n,"MultipleChoice")?Yn(e):Do(n,"Dropdown")?Xn(e):_n(e)).classList.add("text-center"):t===Fe.SmallButton?i=On(e,Ne.SMALL_BUTTON_CARD):t===Fe.MediumButton?i=On(e,Ne.MEDIUM_BUTTON_CARD):t===Fe.VisitingCard?i=On(e,Ne.VISITING_CARD):t===Fe.VerticalCard?i=On(e,Ne.VERTICAL_CARD):t===Fe.Hero?console.debug("Card Type: Hero"):t===Fe.Image||t===Fe.Gif||t===Fe.Video?i=Hn(e):t===Fe.QuickLink?console.debug("Card Type: QuickLink"):t===Fe.Location?i=On(e,Ne.LOCATION_CARD):t===Fe.File?i=On(e,Ne.FILE_CARD):t===Fe.FooterMenu?i=On(e,Ne.FOOTER_MENU,a):t===Fe.InteractiveList?i=On(e,Ne.INTERACTIVE_CARD,a):(console.error("Cannot render card"),console.error("Unknown card type: "+t)),i&&(It={container:i,size:e.length},i.classList.add("mt-1"),o.appendChild(i)),o}}function Nn(e,t){It&&0<e.length&&(t===Fe.None||t===Fe.Thumbnail?e[0].Image&&jn(e):t===Fe.SmallButton?Rn(e,Ne.SMALL_BUTTON_CARD):t===Fe.MediumButton?Rn(e,Ne.MEDIUM_BUTTON_CARD):t===Fe.VisitingCard?Rn(e,Ne.VISITING_CARD):t===Fe.VerticalCard?Rn(e,Ne.VERTICAL_CARD):t===Fe.Hero?console.debug("Card Type: Hero"):t===Fe.Image||t===Fe.Gif||t===Fe.Video?jn(e):t===Fe.QuickLink?console.debug("Card Type: QuickLink"):t===Fe.Location?Rn(e,Ne.LOCATION_CARD):t===Fe.File?Rn(e,Ne.FILE_CARD):t===Fe.FooterMenu?Rn(e,Ne.FOOTER_MENU):t===Fe.InteractiveList?Rn(e,Ne.INTERACTIVE_CARD):(console.error("Cannot render card"),console.error("Unknown card type: "+t)))}function _n(e){var n=document.createElement("div");n.classList.add("card-thumbnail");var a=0;if(e&&e.length&&e.forEach(function(e){if(e){a++;var t=Bn(e.Title,e.Options.tap,e.IsNavigational);n.appendChild(t),10<a&&t.classList.add("extra-option")}}),10<a){n.classList.add("show-less");var t=ii(Ne.SHOW_MORE_BUTTON);t.addEventListener("click",function(){n.classList.remove("show-less")}),n.appendChild(t)}return n}function On(e,n,t){var a=document.createElement("div"),o=0,i=10,r=ii(n),s=r.getAttribute("data-max-cards");if(s&&(i=parseInt(s,10))<=0&&(i=10),e&&e.length){var l=Dn(e);e.forEach(function(e){if(e){var t=Un(e,n,++o,l);a.appendChild(t),i<o&&t.classList.add("extra-option")}})}var d=r.getAttribute("data-container");d||(d="");var c=r.getAttribute("data-container-class");switch(d){case"CarouselContainer":a.classList.add("custom-carousel");var u=dn();if(a.setAttribute("dir",u),c&&a.classList.add(c),e.length<=1){var p=JSON.parse(JSON.stringify(Xe));p.arrows=!1,p.autoplay=!1,p.dots=!1,$(a).slick(p)}else $(a).slick(Xe);$(a).slick("setPosition");break;case"FooterMenu":a.classList.add("interactive-menu-options"),a.classList.add("d-none"),nt.footerMenu.contentElement.innerHTML="",nt.footerMenu.contentElement.appendChild(a),nt.footerMenu.hidden=!1,nt.footerMenu.container.classList.remove("footer-hidden"),An(nt.footerMenu.contentElement,t);var m=document.createElement("div");a=m;break;case"InteractiveMenu":a.classList.add("interactive-menu-options"),a.classList.add("d-none");var f=document.createElement("div"),g={};g.Title=t||"Menu",g.Image="icon:bars",g.Options=[];var v=Un(g,Ne.SMALL_BUTTON_CARD,1,1);v.addEventListener("click",function(e){An(f,t)}),f.appendChild(v),f.appendChild(a),a=f;break;default:if(a.classList.add("card-thumbnail"),i<o){a.classList.add("show-less");var y=ii(Ne.SHOW_MORE_BUTTON);y.addEventListener("click",function(){a.classList.remove("show-less")}),a.appendChild(y)}}return a}function Rn(e,n){var t=ii(n).getAttribute("data-container");switch(t||(t=""),t){case"CarouselContainer":var a=It.size;$(It.container).slick("slickRemove",a-1);var o=e.length+a-1,i=Dn(e);e.forEach(function(e){var t=Un(e,n,a,i);t&&($(It.container).slick("slickAdd",t),a++)}),$(It.container).slick("slickGoTo",It.size-1),It.size=o}}function Dn(e){var t=e.length;return e[e.length-1].IsNavigational&&(t=e[e.length-1].Total),t}function Pn(e,t,n){var a=document.createElement("div");return e=Xa(e),a.textContent=e,a.classList.add("option-pill"),t&&(a.classList.add("pointer"),a.addEventListener("click",function(){un({messageToSend:t,displayMessage:e,preventMessageRender:n,isPostback:!0})})),a}function Bn(e,t,n){var a=Pn(e,t,n),o=document.createElement("div");return o.classList.add("option-pill-container"),o.appendChild(a),o}function Un(n,e,t,a){var o=ii(e);if(n.ElementId&&(o.id=n.ElementId),o.querySelectorAll("[data-card-title]").forEach(function(e){e&&n.Title&&(e.textContent=n.Title)}),o.querySelectorAll("[data-card-subtitle]").forEach(function(e){e&&n.SubTitle&&(e.textContent=n.SubTitle)}),n.Coordinates){var i=o.querySelector("[data-card-coordinates]");if(i||o.hasAttribute("data-card-coordinates")&&(i=o),i){var r="https://www.google.com/maps?q="+n.Coordinates.Item1+","+n.Coordinates.Item2;i.addEventListener("click",function(){window.open(r,"_blank")})}}o.querySelectorAll("[data-card-fileurl]").forEach(function(e){e&&n.FileUrl&&e.addEventListener("click",function(){window.open(n.FileUrl,"_blank")})}),o.querySelectorAll("[data-card-description]").forEach(function(e){e&&n.Description&&(e.innerHTML=marked(n.Description))});var s=o.querySelector("[data-card-tapbutton]");s||o.hasAttribute("data-card-tapbutton")&&(s=o);var l=Ro(n.Image);if(l)o.querySelectorAll("[data-card-icon-container]").forEach(function(e){e&&(e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l))});else if(n.Image){o.querySelectorAll("[data-card-image]").forEach(function(e){e&&(e.src=n.Image)})}else o.classList.add("no-image");if(s&&n.OnClick)s.addEventListener("click",function(e){n.OnClick(e)});else if(s&&n.Options){var d=Object.keys(n.Options);if(0<d.length){var c=n.Options.tap;c||(c=n.Options[d[0]]),s.addEventListener("click",function(){un({messageToSend:c,displayMessage:n.Title,preventMessageRender:n.IsNavigational,isPostback:!0})})}}var u=o.querySelector("[data-card-add-btns]");u&&n.Options&&Object.keys(n.Options).forEach(function(e){switch(e){case"Open":break;default:var t=ii(Ne.CARD_BUTTON);t&&(t.textContent=e,t.addEventListener("click",function(){un({messageToSend:n.Options[e],displayMessage:e,preventMessageRender:n.IsNavigational,isPostback:!0})}),u.appendChild(t))}});var p=n.Total||a;p&&1<p&&o.querySelectorAll("[data-card-slide-number]").forEach(function(e){e&&(n.IsNavigational||(e.textContent=t+"/"+p))});return o.querySelectorAll("[data-marked-content]").forEach(function(e){e&&e.innerHTML&&(e.innerHTML=marked(e.innerHTML))}),o}function Fn(e,t){var n=document.getElementById(e);if(n){if(t.Title)n.querySelectorAll("[data-card-title]").forEach(function(e){e&&(e.textContent=t.Title)});var a=n.querySelector("[data-card-tapbutton]");a||n.hasAttribute("data-card-tapbutton")&&(a=n),t.RemoveId&&n.removeAttribute("id"),a&&t.RemoveClick&&(n.removeAttribute("class"),a.outerHTML=a.outerHTML)}}function Hn(e){var n=document.createElement("div");if(e&&0<e.length){var a=Dn(e),o=1;e.forEach(function(e){var t=Vn(e,o,a);t&&(n.appendChild(t),o++)})}n.classList.add("custom-carousel");var t=dn();if(n.setAttribute("dir",t),e.length<=1){var i=JSON.parse(JSON.stringify(Xe));i.arrows=!1,i.autoplay=!1,i.dots=!1,$(n).slick(i)}else $(n).slick(Xe);return $(n).slick("setPosition"),n}function Vn(t,e,n){var a=document.createElement("div"),o=zn(t);if(o||(t.Image&&Na(t.Image)?(o=document.createElement("img")).src=t.Image:t.Gif&&Na(t.Gif)&&((o=document.createElement("img")).src=t.Gif)),o){a=document.createElement("div");var i=document.createElement("div");i.classList.add("img-container");var r=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),d=null,c=document.createElement("div"),u=document.createElement("span");if(!t.IsNavigational){var p=t.Total||n;u.textContent=e+"/"+p}if(o.setAttribute("data-index",e),o.alt=t.Title,o.classList.add("custom-carousel-image","loading","pointer"),o.addEventListener("load",function(){o.classList.remove("loading")}),o.addEventListener("error",function(){Ut({message:"Media not found: "+mediaUrl},!1)}),t.Options){var m=[],f=!1;if(Object.keys(t.Options).forEach(function(e){switch(e){case"Open":a.setAttribute("data-open-imageurl",t.Options.Open),a.setAttribute("data-open-caption",t.Title),a.addEventListener("click",function(e){Gn(a)}),f=!0;break;default:m.push({title:e,value:t.Options[e]})}}),0<m.length){if(!f){var g=m[0];o.addEventListener("click",function(){un({messageToSend:g.value,displayMessage:g.title,preventMessageRender:t.IsNavigational,isPostback:!0})})}(d=document.createElement("div")).classList.add("text-center"),m.forEach(function(e){return d.appendChild(Pn(e.title,e.value,t.IsNavigational))})}}r.textContent=t.Title,s.textContent=t.SubTitle,l.textContent=t.Description,l.textContent&&(l.innerHTML=marked(l.textContent)),a.classList.add("card-border"),r.classList.add("text-center"),r.classList.add("data-title"),s.classList.add("text-center"),s.classList.add("data-subtitle"),l.classList.add("text-center"),u.classList.add("text-center"),c.classList.add("text-center","card-index","primary-border"),c.appendChild(u),c.style.height=c.style.width,r.textContent&&a.appendChild(to([],r)),i.appendChild(o),a.appendChild(i),1<n&&i.appendChild(c),s.textContent&&a.appendChild(to([],s)),l.textContent&&a.appendChild(to([],l)),d&&a.appendChild(to([],d))}return a}function zn(t){if(t&&Na(t.Video))try{var e=new URL(t.Video).searchParams.get("v");if(e)return qn(e);var n=document.createElement("video");n.setAttribute("controls","");var a=document.createElement("source");return a.src=t.Video,n.appendChild(a),n}catch(e){console.error("[Kenyt.AI] Error rendering Youtube Video: "+t.Video),console.error(e)}return null}function qn(e){var t=document.createElement("iframe");return t.src="https://www.youtube-nocookie.com/embed/"+e,t.frameBorder=0,t.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen="allowFullscreen",t}function Gn(e){var t=Wn(e);if(0<=t){for(var n=[],a=e.previousElementSibling;a;){var o=Wn(a);if(0<=o&&o<t){if(c=a.getAttribute("data-open-imageurl")){var i={imageUrl:c,caption:a.getAttribute("data-open-caption")};n.push(i)}a=a.previousElementSibling}else a=null}for(var r=[],s=e,l=t;s;){var d=Wn(s);if(0<=d&&l<=d){var c;if(l=d,c=s.getAttribute("data-open-imageurl")){var u={imageUrl:c,caption:s.getAttribute("data-open-caption")};r.push(u)}s=s.nextElementSibling}else s=null}var p={};for(p.currentSlideNumber=n.length+1,p.slides=[];n.length;){var m=n.pop();p.slides.push(m)}for(var f=0;f<r.length;f++)p.slides.push(r[f]);so(Ve.FullScreenImage,p)}}function Wn(e){var t=-1,n=e.getElementsByClassName("custom-carousel-image");return n&&(n=n[0])&&(t=n.getAttribute("data-index")),t}function jn(e){if(It&&e&&0<e.length){var n=It.size;$(It.container).slick("slickRemove",n-1);var t=e.length+n-1,a=Dn(e);e.forEach(function(e){var t=Vn(e,n,a);t&&($(It.container).slick("slickAdd",t),n++)}),$(It.container).slick("slickGoTo",It.size-1),It.size=t}}function Kn(e){var n=ii(Ne.OTP_FORM),a=n.querySelector("[data-input-field]"),o=n.querySelector("[data-submit]").querySelector("span"),t=n.querySelector("[data-mobile-number]"),i=n.querySelector("[data-error-description]"),r=n.querySelector("[data-change-mobile-number]"),s=n.querySelector("form");return t.textContent=e||"your mobile",a.pattern=Te.source,a.addEventListener("change",function(){i.textContent=""}),r.addEventListener("click",function(){var e=n.parentElement,t=La($n());n.remove(),e.appendChild(t)}),s.addEventListener("submit",function(e){e.preventDefault();var t=a.value;i.textContent="",o.classList.remove("fa-paper-plane"),o.classList.add("fa-spin","fa-spinner"),Te.test(t)?(pn(t,t,!1,!1,!1),n.remove()):(console.warn("OTP Invalid"),i.textContent="The OTP you entered is invalid, try again")}),n}function $n(){var t=ii(Ne.PHONE_NUMBER_FORM),n=t.querySelector("[data-input-field]"),a=t.querySelector("[data-error-description]"),e=t.querySelector("form");return window.intlTelInput(n,{geoIpLookup:function(e){e("IN")},hiddenInput:"full_number",initialCountry:"auto",placeholderNumberType:"MOBILE",separateDialCode:!0,utilsScript:x}),n.addEventListener("change",function(){a.textContent=""}),e.addEventListener("submit",function(e){e.preventDefault(),a.textContent="",n.value?(pn(""+b+n.value,n.value,!1,!1,!1),t.remove()):a.textContent="Please enter a valid mobile number"}),t}function Yn(e){var t=document.createElement("div");t.classList.add("multiplechoices");var a=document.createElement("div");t.appendChild(a);var o=document.createElement("button");o.textContent=Xa("None of the above")+" ",o.classList.add("btn","primary-button","submit","mt-2");var n=document.createElement("span");return n.classList.add("fa","fa-send"),o.appendChild(n),o.addEventListener("click",function(){Zn(a)}),t.appendChild(o),e&&e.length&&e.forEach(function(e){if(e){var t=document.createElement("div");t.textContent=e.Title,t.classList.add("option-pill"),e.Options.tap&&(t.setAttribute("content",e.Options.tap),t.classList.add("pointer"),t.addEventListener("click",function(){t.classList.toggle("isSelected"),Qn(o,a)}));var n=document.createElement("div");n.classList.add("option-pill-container"),n.appendChild(t),a.appendChild(n)}}),t}function Jn(e){var t=[],n=[];if(e&&e.children)for(var a=e.children,o=0;o<a.length;o++){var i=a[o].children[0];i.classList.contains("isSelected")&&(t.push(i.getAttribute("content")),n.push(i.textContent))}var r={};return r.selected=t.join(),r.display=n.join(),r}function Qn(e,t){var n=Jn(t);e&&n&&(n.selected?e.textContent=Xa("Submit")+" ":e.textContent=Xa("None of the above")+" ")}function Zn(e){var t=Jn(e);t.selected?pn(t.selected,t.display):pn("None of the above",Xa("None of the above"))}function Xn(e){var t=document.createElement("div");t.classList.add("dropdown");var n=[];e&&e.length&&e.forEach(function(e){if(e&&e.Options.tap){var t=e.Title+":"+e.Options.tap;n.push(t)}});var a=Ja(n,"");t.appendChild(a),a=ea(a);var o=document.createElement("button");o.textContent=Xa("Submit")+" ",o.classList.add("btn","primary-button","submit","mt-2");var i=document.createElement("span");return i.classList.add("fa","fa-send"),o.appendChild(i),o.addEventListener("click",function(){ta(a)}),t.appendChild(o),t}function ea(e){var t=e.parentNode,n=document.createElement("div");n.classList.add("dropdown-search"),t.insertBefore(n,e);var a=document.createElement("input");a.classList.add("primary-border"),a.classList.add("pointer"),n.appendChild(a);var o=document.createElement("div");o.classList.add("options"),o.classList.add("smooth-scroll"),o.classList.add("thin-scroll"),o.classList.add("empty-input"),o.classList.add("primary-border"),n.appendChild(o),e.childNodes.forEach(function(e){var t=document.createElement("div");t.classList.add("no-match"),t.setAttribute("data-value",e.value),t.classList.add("primary-hover"),t.classList.add("pointer"),t.innerText=e.innerText,e.value?(o.appendChild(t),t.addEventListener("click",function(e){!function(e){var t=e.target,n=t.parentNode,a=n.previousSibling;a.value=t.innerText;var o=t.getAttribute("data-value");a.setAttribute("data-value",o),t.parentNode.classList.add("empty-input");var i=n.nextSibling;i.classList.add("fa-caret-down"),i.classList.remove("fa-caret-up"),e.stopPropagation(),Wt(),po(B)}(e)})):a.placeholder=e.innerText}),a.addEventListener("keyup",function(e){s(e.target)}),a.addEventListener("keydown",function(e){s(e.target)}),a.addEventListener("focus",function(e){s(e.target)});var i=document.createElement("span");i.classList.add("fa"),i.classList.add("fa-caret-down"),i.classList.add("icon"),i.classList.add("pointer"),n.appendChild(i),i.addEventListener("focus",function(e){s(e.target.previousSibling.previousSibling)});var r=document.createElement("span");function s(e){e.removeAttribute("data-value");var t=e.nextSibling,n=t.nextSibling.nextSibling;if(e.value){t.classList.remove("empty-input"),n.classList.remove("d-none");for(var a=!1,o=t.getElementsByTagName("div"),i=0;i<o.length;i++)o[i].innerText.toLowerCase().includes(e.value.toLowerCase())?(o[i].classList.remove("no-match"),a=!0):o[i].classList.add("no-match");a||t.classList.add("empty-input")}else{t.classList.remove("empty-input"),n.classList.add("d-none");for(o=t.getElementsByTagName("div"),i=0;i<o.length;i++)o[i].classList.remove("no-match")}var r=t.nextSibling;r.classList.remove("fa-caret-down"),r.classList.add("fa-caret-up"),po(B)}return r.innerText="close",r.classList.add("material-icons-outlined"),r.classList.add("remove-icon"),r.classList.add("pointer"),r.classList.add("d-none"),r.addEventListener("click",function(e){var t=e.target.previousSibling.previousSibling.previousSibling;t.value="",t.focus(),s(t)}),n.appendChild(r),t.removeChild(e),a}function ta(e){var t=e.value,n="";if(e.options&&e.selectedIndex)n=e.options[e.selectedIndex].text;else if(e.list&&e.list.options)for(var a=0;a<e.list.options.length;a++)e.list.options[a].value==t&&(n=e.list.options[a].innerText);else e.hasAttribute("data-value")&&(t=e.getAttribute("data-value"),n=e.value);t&&(n||(n=t),pn(t,n))}function na(e){e.which===g||e.keyCode===g?e.target.value&&(e.preventDefault(),aa()):Ei(e.target)}function aa(){if(!Lt){var e=F.value;e&&(lt=!1,pn(e,e),F.value=""),Ei(F)}}function oa(e){if(U){var t=document.createElement("div");t.classList.add("col-12"),We?We=!1:t.classList.add("mt-2");for(var n=arguments.length,a=Array(1<n?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];a.forEach(function(e){t.classList.add(e)}),t.appendChild(e),ia(t),U.appendChild(t),window.setTimeout(function(){po(B)},100)}}function ia(e){vi.setFittingClassByText(e)}function ra(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];console.debug("Applying the following window configuration"),console.debug(e);var a=[],o=Co(),i="py-1";if(e){if(Na(e.FontFamily)&&a.push({elementSelector:"#chatWindow",properties:[{property:"font-family",value:"'"+e.FontFamily+"'"}]}),Na(e.BotPosition)&&so(Ve.UpdateBotPosition,e.BotPosition),Na(e.FrameColor)){var r=gi.getThemeSettings(e.FrameColor,e.FrameColorGradient);if(r){var s=gi.getThemeSettings("#ffffff","#ffffff");r.backgroundColor?N.style.backgroundColor=r.backgroundColor:N.style.backgroundImage=r.backgroundGradient,N.style.color=r.textColor,V.style.color=r.textColor,G.style.color=r.textColor,F.style.borderColor=r.color,G.style.backgroundColor=r.color,V.style.backgroundColor=r.color,so(Ve.UpdateChatBubbleColor,r.color),so(Ve.TextColor,r.textColor),a.push(),a.push({elementSelector:".option-pill:hover",properties:[{property:"color",value:""+r.buttonColorHover,override:!0},{property:"border-color",value:""+r.buttonBackgroundColorHover,override:!0},{property:"background-color",value:""+r.buttonBackgroundColorHover,override:!0}]},{elementSelector:".option-pill.isSelected",properties:[{property:"color",value:""+r.buttonColorHover,override:!0},{property:"border-color",value:""+r.buttonBackgroundColorHover,override:!0},{property:"background-color",value:""+r.buttonBackgroundColorHover,override:!0}]},{elementSelector:".option-pill",properties:[{property:"color",value:""+r.buttonColor,override:!0},{property:"border-color",value:""+r.buttonBorderColor,override:!0},{property:"background-color",value:""+r.buttonBackgroundColor,override:!0}]},{elementSelector:".bg-accent",properties:[{property:"background-image",value:""+r.backgroundGradient,override:!0}]},{elementSelector:".text-accent",properties:[{property:"color",value:""+s.textColor,override:!0}]},{elementSelector:".bot-chat-bubble",properties:[{property:"color",value:s.textColor+" !important"}]},{elementSelector:".interactivelist-card:hover",properties:[{property:"color",value:""+r.buttonColorHover,override:!0},{property:"border-color",value:""+r.colorTo,override:!0},{property:"background-color",value:""+r.colorTo,override:!0}]},{elementSelector:".primary-border",properties:[{property:"border-color",value:r.color+" !important"}]},{elementSelector:".primary-background",properties:[{property:"background-color",value:r.color+" !important"}]},{elementSelector:".primary-color",properties:[{property:"color",value:r.color+" !important"}]},{elementSelector:".primary-text",properties:[{property:"color",value:r.textColor+" !important"}]},{elementSelector:".primary-button",properties:[{property:"color",value:r.textColor+" !important"},{property:"background-color",value:r.color+" !important"}]},{elementSelector:".style3 .text-center.data-subtitle",properties:[{property:"color",value:r.color+" !important"}]},{elementSelector:".style3 .user-chat-bubble",properties:[{property:"background-color",value:r.color+" !important"},{property:"color",value:r.textColor+" !important"}]},{elementSelector:".style3 .send-btn",properties:[{property:"color",value:r.color+" !important"}]},{elementSelector:".style3 #chatWindowHeader",properties:[{property:"background-color",value:r.color+" !important"}]},{elementSelector:".style3 .slick-next:before",properties:[{property:"color",value:r.color+" !important"}]},{elementSelector:".style3 .slick-prev:before",properties:[{property:"color",value:r.color+" !important"}]},{elementSelector:".primary-hover:hover",properties:[{property:"color",value:""+r.buttonColorHover,override:!0},{property:"border-color",value:""+r.buttonBackgroundColorHover,override:!0},{property:"background-color",value:""+r.buttonBackgroundColorHover,override:!0}]})}}if(Na(e.BubbleBackgroundColor)&&_&&(_.style.backgroundColor=e.BubbleBackgroundColor),Na(e.EnableSpeech)&&window.hasOwnProperty("webkitSpeechRecognition")&&(Do(e.EnableSpeech,"true")?ao(z):no(z)),pa(e.WindowStyle),Na(e.UserPersona)&&(t&&(e.UserPersona=fa(e.UserPersona)),Oo("user",e.UserPersona,t)),Na(e.BotPersona)&&(t&&(e.BotPersona=fa(e.BotPersona)),Oo("bot",e.BotPersona,t)),Na(e.FontSize)&&(U.style.fontSize=""+e.FontSize),Na(e.HeaderTextColor)&&(D.style.color=e.HeaderTextColor,P.style.color=e.HeaderTextColor),Na(e.HeaderTitle)&&(e.HeaderTitle===I?(D.innerHTML="&nbsp;",N.classList.contains(i)||N.classList.add(i)):D.textContent=e.HeaderTitle),Na(e.HeaderSubTitle)&&(e.HeaderSubTitle===I?P.innerHTML="&nbsp;":(P.textContent=e.HeaderSubTitle,N&&e.HeaderTitle!==I&&N.classList.contains(i)&&N.classList.remove(i))),Na(e.HeaderFontSize)&&(D.style.fontSize=e.HeaderFontSize),!t&&(Do(e.ShowPoweredBy,"true")?j.classList.remove("d-none"):j.classList.add("d-none"),e.PoweredBy&&e.PoweredBy.Name&&e.PoweredBy.Website)){var l=document.getElementById("brand-link");l&&(j.classList.remove("d-none"),l.setAttribute("href",e.PoweredBy.Website),l.innerText=e.PoweredBy.Name)}if(Na(e.PlaceholderText)&&ha(e.PlaceholderText),Na(e.BackgroundImage)&&Ea(e.BackgroundImage),Na(e.BackgroundColor)&&ba(e.BackgroundColor),Na(e.UserChatBubbleColor)){var d=gi.getThemeSettings(e.UserChatBubbleColor,e.UserChatBubbleColorGradient);d&&a.push({elementSelector:".user-chat-bubble",properties:[{property:"background-color",value:d.color+" !important"},{property:"color",value:d.textColor+" !important"}]})}if(Na(e.HeaderImage)&&(O.src=e.HeaderImage),Na(e.HeaderShowOnline)&&(Do(e.HeaderShowOnline,"true")?ao(R):no(R)),Na(e.LiveAgentCall)&&Do(e.LiveAgentCall,"true")&&Do(e.HideMenuInHeader,"false")&&nt.headerMenu.container&&ao(nt.headerMenu.container.parentElement),it&&(e.DesktopMinimizeBotAtStart=e.DesktopMinimizeBotAtStart||"",e.MobileMinimizeBotAtStart=e.MobileMinimizeBotAtStart||"",e.OpenWindowAfterMilliSeconds||(e.OpenWindowAfterMilliSeconds=0),n||(o?((""==e.MobileMinimizeBotAtStart||Do(e.MobileMinimizeBotAtStart,"false")||0<e.OpenWindowAfterMilliSeconds)&&setTimeout(function(){xa()},e.OpenWindowAfterMilliSeconds),Mo()):(""==e.DesktopMinimizeBotAtStart||Do(e.DesktopMinimizeBotAtStart,"false")||0<e.OpenWindowAfterMilliSeconds)&&setTimeout(function(){xa()},e.OpenWindowAfterMilliSeconds))),0<a.length&&fo(a),Na(e.Languages)){var c=e.Languages.trim().split(",");if(c&&0<c.length){var u=xo(c);u&&1<=u.length&&(u[0].value,u.forEach(function(e){e.value===fe&&e.value})),Io(u)}}if(e.CustomPanelCss){var p=document.createElement("style");p.innerText=e.CustomPanelCss,document.head.appendChild(p)}var m=document.getElementById("k-chat-restart");m&&(e.EnableRestartChat?m.classList.remove("d-none"):m.classList.add("d-none")),e.IdleTimeoutSeconds&&(wt.idleTimeSec=e.IdleTimeoutSeconds,wt.disconnectOnIdleId&&window.clearInterval(wt.disconnectOnIdleId),wt.disconnectOnIdleId=window.setInterval(Gt,1e3*wt.idleTimeSec))}}function sa(e){document.querySelector(".material-icons-outlined").innerHTML=e}function la(e,t){var n=e.classList,a=!0,o=!1,i=void 0;try{for(var r,s=n[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var l=r.value;l.startsWith("fa-")&&e.classList.remove(l)}}catch(e){o=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw i}}e.classList.add(t)}function da(e){document.body.classList.remove("style1"),document.body.classList.remove("style3"),document.body.classList.add(e)}function ca(e,t){if(e.textContent){for(var n=0,a=0;a<e.textContent.length;a++){var o=e.textContent.charAt(a);" "==o?n+=4:o==o.toLowerCase()?n+=9:n+=12}var i=1;"style3"==gt?n<=50?i=3:n<=100&&(i=2):n<=90?i=3:n<=160&&(i=2),t.push(i)}else t.push(-1);return t}function ua(){var e=document.querySelectorAll(".option-pill-container");if(e&&e.length){var t=[];Array.prototype.forEach.call(e,function(e){t=ca(e,t)});for(var n=3,a=0;a<t.length;){for(var o=t[a],i=t[a],r=!0,s=1;s<o;s++)a+s<t.length?t[a+s]>=i||(r=!1):r&&0<a&&i==n?(o=s,s+=t[a]):r=!1;if(r){var l="option-pill-"+i;for(s=0;s<o;s++)e[a+s].className=e[a+s].className.replace(/option-pill-\d+/g,l);a+=o,i<n&&(n=i)}else t[a]=t[a]-1}}}function pa(e){if(Na(e)){gt=e;var t=document.querySelectorAll(".fa-fw"),n=["fa-paper-plane","fa-play"],a=Array.from(t).filter(function(e){var t=Array.from(e.classList);return n.some(function(e){return t.includes(e)})});Do(e,"style3")?(da(e),sa("more_horiz"),a.forEach(function(e){la(e,"fa-play")}),ma("chatwindow_style3"),ua()):(da(e),sa("more_vert"),a.forEach(function(e){la(e,"fa-paper-plane")}))}}function ma(e){var t=document.createElement("link");t.href="./dist/css/"+e+".css",t.rel="stylesheet",document.head.appendChild(t)}function fa(e){var t=e;if(Na(e)){var n=e.match(A);if(n&&0<n.length){var a=n[0],o=a.match(M);o&&0<o.length&&(t=e.replace(a,o[0]))}}return t}function va(e){var t=gi.normalizeColor(e);return t&&gi.getPercievedBrightness(t)>=gi.BRIGHTNESS_THRESHOLD?"#000000ff":e}function ya(e){e&&D&&(D.textContent=e)}function ha(e){e&&F&&(F.placeholder=e)}function Ta(){return Q&&Q.HeaderImage&&"string"==typeof Q.HeaderImage?Q.HeaderImage:defaultWindowConfig.HeaderImage}function Ca(){return Na(Q.FrameColor)?Q.FrameColor:Ze.FrameColor}function Ea(e){e&&B&&(B.style.backgroundImage="url("+e+")")}function ba(e){Na(e)&&(B.style.backgroundColor=e)}function Sa(){so(Ve.ChatWindowClose),si(ze.ChatWindowClose,{source:"userClick"})}function xa(){so(Ve.ChatWindowOpen)}function Ia(e,t,n){var a=document.createElement("div"),o=document.createElement("p");return a.classList.add("d-inline-block","px-2","py-2","float-right","user-chat-bubble"),o.textContent=e,a.appendChild(o),n||a.appendChild(uo(t)),a}function wa(e,t,n,a,o,i){e||(e="");var r=document.createElement("div");if(r.classList.add("d-inline-block","px-2","py-2","bot-chat-bubble"),r.innerHTML=marked(e),Ma(r),t&&0<t.length){var s=kn(t,n,a,i);s&&r.appendChild(s),n&&(n!==Fe.MediumButton&&n!==Fe.VerticalCard||r.classList.add("chat-bubble-fullwidth"),n===Fe.File&&r.classList.add("min-width-50"),n===Fe.Location&&(r.classList.add("min-width-50"),r.classList.add("chat-bubble-flexible-width")))}if(o){var l=ae;if(!l){var d=(qa()?Le.LOCAL:Le.PROD)+"/create/bot";oe&&oe.startsWith(d)&&(l=!0)}if(l&&m){var c=document.createElement("div");c.classList.add("pointer","intent-edit");var u=(qa()?Le.LOCAL:Le.PROD)+"/settings/training?orgid="+m.OrganizationId+"&botid="+m.BotId+"&xpath="+o;c.innerHTML='<span class="fa fa-pencil intent-edit-icon"></span>',c.addEventListener("click",function(){var e={url:u,openInSamePage:!1};so(Ve.NavigateToPage,e)}),r.appendChild(c)}}return r}function La(e){return e&&e.classList.add("d-inline-block","px-2","py-2","bot-chat-bubble"),e}function Ma(e){if(e){var t=Array.from(e.querySelectorAll("a"));t&&0<t.length&&t.forEach(function(e){e.target||(e.target="_blank")})}}function Aa(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function ka(e){return e&&"string"==typeof e}function Na(e){return ka(e)&&0<e.trim().length}function _a(){return{botName:te,lastConversationId:ee,conversationLanguage:fe,timestamp:new Date,botUserWebContext:Ge,messages:ae?[]:me}}function Oa(){return{conversationId:ee,isMinimized:$e,menu:nt.headerMenu.content,userPersona:je,botName:te,expandType:Y&&Y.getAttribute("data-toggle")||null,timestamp:new Date,pageUrl:oe,queryUserDenied:u}}function Ra(){if(ge){var e=window.localStorage.getItem(y);if(e){Z=e,console.debug("UserId restored from local storage");var t=window.localStorage.getItem(h);X=!(!t||"true"!==t)}else console.debug("UserId not found in local storage")}}function Da(e){e&&(e.timestamp&&(e.timestamp=new Date(e.timestamp)),e.lastConversationId&&e.lastConversationId!==ee&&(ko(e.timestamp,new Date)<ke?(ee=e.lastConversationId,so(Ve.Initialize,ee),e.messages&&0<e.messages.length&&(Ba(e.messages),window.setTimeout(function(){po(B)},0))):(me=[],console.debug("Session timed out, using new conversationID"),Ge.SessionCount?Ge.SessionCount=Ge.SessionCount+1:Ge.SessionCount=1)),e.conversationLanguage&&(fe=e.conversationLanguage))}function Pa(e){if(e&&e.botName&&e.botName===te){if(e.conversationId&&(ee=e.conversationId),e.userPersona&&Oo("user",e.userPersona),e.expandType)Y.getAttribute("data-toggle")!==e.expandType&&Mo();e.isMinimized||!1===$e||xa(),Mn(e.menu)}}function Ba(e){e.forEach(function(e){if(e.message)if(e.isUserMessage)"user"!==p&&Ao("user",e.messageTimestamp,!0),oa(Ia(e.displayMessage?e.displayMessage:e.message,e.messageTimestamp,!0)),p="user";else{if(p!==e.message.DisplayName&&Ao(e.message.DisplayName,e.messageTimestamp),e.customMessage&&e.customMessage.messageType===qe.Form&&Go(e.customMessage.values)){var t=Ko(e.customMessage.values);t.fields.forEach(function(e){e&&Na(e.validationPattern)&&(e.validationPattern=new RegExp(e.validationPattern))}),p!==e.customMessage.displayName&&Ao(e.customMessage.displayName,e.messageTimestamp),Bo(t)}(zo(e.message)||Na(e.message))&&xn(e.message,!0),p=e.message.DisplayName}}),0<(me=e||[]).length&&!isNaN(me[me.length-1].id)&&(rt=me[me.length-1].id+1||rt)}function Ua(){if(ge){window.localStorage.setItem(y,Z||""),X?window.localStorage.setItem(h,"true"):window.localStorage.removeItem(h);var e=_a();console.debug("State saved in localStorage"),console.debug(e),window.localStorage.setItem(de,JSON.stringify(e)),Fa()}else console.warn("[Kenyt.AI] Unable to store state, Cookies are disabled")}function Fa(){var e=Oa();console.debug("State saved in sessionStorage"),console.debug(e),window.sessionStorage.setItem(le,JSON.stringify(e))}function Ha(){if(ge){var e=window.localStorage.getItem(de);return e?JSON.parse(e):e}return null}function Va(){if(ge){var e=window.sessionStorage.getItem(le);return e?JSON.parse(e):e}return null}function za(){var e=Pt("origin")||document.referrer;return e||console.warn("Cannot retrieve parent URL"),e}function qa(){var e=window.location.href;return 0<=e.indexOf("http://localhost")||e.startsWith("file:///")}function Ga(){return 0<=window.location.href.indexOf("ngrok.io")}function Wa(){if(qa())return console.debug("AppName set as "+Ie),Ie;if(Ga()){var e="https://"+window.location.hostname+xe;return console.debug("Endpoint set as ngrok url "+e),e}return console.debug("Endpoint set as "+we),we}function ja(e){return e&&"object"===(void 0===e?"undefined":a(e))&&e instanceof Date}function Ka(e){e||(console.debug=function(){})}function $a(n,r,t,e){var a=n.tag||"div",s=document.createElement(a);s.classList.add("form");var o=document.createElement("span"),i=document.createElement("p");if(o.classList.add("h6","font-weight-bold"),i.classList.add("m-0"),o.textContent=null!=r.Title?r.Title:n.title,i.textContent=null!=r.Description?r.Description:n.description,s.appendChild(Za(["mt-1"],eo(["text-center"],o,i))),r.Slots){var l=r["Appointment Date"];l||(l={}),l.datetimepickersettings||(l.datetimepickersettings={}),l.datetimepickersettings.beforeShowDay=function(e){var t=fi.getDateKeys(e),n=!1;return t.every(function(e){return!r.Slots[e]||(n=0<r.Slots[e].length,!1)}),[n,""]},r["Appointment Date"]=l;var d=r["Appointment Time"];d||(d={}),d.datatype="dropdown",d.need="Appointment Date",d.beforeShow=function(e){var n=this,t=fi.getDateKeys(e),a=d.value;t.every(function(e){return!r.Slots[e]||(a=r.Slots[e],!1)}),a||(a="10 AM, 11 AM, 12 PM, 1 PM, 2 PM, 3 PM, 4 PM, 5 PM, 6 PM, 7 PM, 8 PM"),this.inputElementRef.innerHTML="",a.forEach||(a=a.split(",")),a.forEach(function(e){var t=document.createElement("option");t.innerText=e,t.value=e,n.inputElementRef.appendChild(t)})},r["Appointment Time"]=d}var c=void 0;n.fields.forEach(function(i){var e=Ya(i,r),a=e.colEle;if(a){if(i.inputElementRef=e.inputElementRef,i.inputContainer=e.inputContainer,i.feedbackElementRef=e.feedbackElementRef,i.takeHalfRow&&a.classList.add("col-6"),c)c.appendChild(a),s.appendChild(c),c=null;else{var t=Za(["mt-2"],a);s.appendChild(t),i.takeHalfRow&&(c=t)}if(i.need&&n.fields.forEach(function(o){if(i.need===o.field&&o&&o.inputElementRef){if("datetime"===o.datatype){!i.beforeShow&&o.Slots&&(i.beforeShow=function(e){var n=this,t=fi.getDateKeys(e),a=i.value;t.every(function(e){return!o.Slots[e]||(a=o.Slots[e],!1)}),a||(a="10 AM, 11 AM, 12 PM, 1 PM, 2 PM, 3 PM, 4 PM, 5 PM, 6 PM, 7 PM, 8 PM"),this.inputElementRef.innerHTML="",a.forEach||(a=a.split(",")),a.forEach(function(e){var t=document.createElement("option");t.innerText=e,t.value=e,n.inputElementRef.appendChild(t)})});var t=o.datetimepickersettings.onChangeDateTime;o.datetimepickersettings.onChangeDateTime=function(e){t&&t(e),i.beforeShow&&i.beforeShow(e),ao(i.inputContainer),po(B)}}else o.inputElementRef.addEventListener("change",function(){ao(i.inputContainer),po(B)},!1);no(i.inputContainer)}}),i.addMore){i.extraInputs=i.extraInputs||[];var o=document.createElement("button");o.textContent=" + ",o.classList.add("btn","primary-button","add-more-btn"),o.addEventListener("click",function(e){e.preventDefault();var t=Ya(i,r),n=Za(["mt-2"],t.colEle);a.parentNode.parentNode.insertBefore(n,a.parentNode.nextSibling),i.extraInputs.push({inputElementRef:t.inputElementRef,feedbackElementRef:t.feedbackElementRef}),4==i.extraInputs.length&&no(o)}),a.appendChild(o)}}});var u=document.createElement("button");u.textContent="Cancel",u.classList.add("btn","btn-secondary"),e&&u.addEventListener("click",function(){e()});var p=document.createElement("button");return p.textContent=" "+Xa("Submit")+" ",p.classList.add("btn","primary-button"),e||p.classList.add("mr-2"),n.onSubmit?s.onsubmit=n.onSubmit:t&&p.addEventListener("click",function(e){t(e,n.fields,n.submit,n.submitType)}),e?s.appendChild(Za(["mt-2"],eo(["text-center"],p,u))):s.appendChild(Za(["mt-2"],eo(["text-center"],p))),s}function Ya(t,n,e){if(n[t.field]){if(n[t.field].value&&(t.value=n[t.field].value),n[t.field].isMandatory&&(t.isMandatory=n[t.field].isMandatory),n[t.field].need&&(t.isMandatory=n[t.field].need),n[t.field].beforeShow&&(t.beforeShow=n[t.field].beforeShow),n[t.field].telSettings)if(t.telSettings)Object.keys(n[t.field].telSettings).forEach(function(e){t.telSettings[e]=n[t.field].telSettings[e]});else t.telSettings=n[t.field].telSettings;if(n[t.field].datetimepickersettings)if(t.datetimepickersettings)Object.keys(n[t.field].datetimepickersettings).forEach(function(e){t.datetimepickersettings[e]=n[t.field].datetimepickersettings[e]});else t.datetimepickersettings=n[t.field].datetimepickersettings;n[t.field].errorMessage&&(t.errorMessage=n[t.field].errorMessage),n[t.field].validationPattern&&(t.validationPattern=n[t.field].validationPattern),n[t.field].image&&(t.image=n[t.field].image),n[t.field].imageClass&&(t.imageClass=n[t.field].imageClass)}var a=document.createElement("label"),o=document.createElement("input"),i=document.createElement("div");if(t.dataType&&(t.datatype=t.dataType),"dropdown"===t.datatype){t.options=t.options||t.value;var r=t.displayName||t.field;(o=Ja(t.options,r)).name=t.field}else o.type=t.datatype,t.placeholder?a.innerHTML=t.placeholder:a.textContent=t.displayName||t.field,o.placeholder=t.placeholder||t.displayName||t.field,o.placeholder=Xa(o.placeholder),t.value&&(o.value=t.value);t.name&&(o.name=t.name),o.classList.add("form-control"),o.style.fontStyle="inherit",t.readonly&&o.setAttribute("readonly","readonly"),t.min&&(o.min=t.min),t.max&&(o.max=t.max),i.classList.add("invalid-feedback","d-none"),i.textContent=t.errorMessage;var s=void 0,l=void 0;if(t.image){var d=Ro(t.image);if(d){var c="icon-container";t.imageClass&&(c=c+","+t.imageClass),l=to(["input-container"],to(c=c.split(","),d),o)}}if(l||(l=to([],o)),"checkbox"===t.datatype?(o.name=t.field,o.classList.remove("form-control"),Do(t.value,"true")&&(o.checked=!0),(s=eo([],l,a,i)).classList.add("checkbox"),i.style.display="block"):s=t.useLabel?eo([],a,l,i):eo([],l,i),n&&n.Mandatory&&n.Mandatory.includes(t.field)&&(t.isMandatory=!0),"tel"===t.datatype&&t.validationSource===S){var u="IN";n&&n.CountryCode&&(u=n.CountryCode);var p={geoIpLookup:function(e){e(u)},hiddenInput:"full_number",initialCountry:"auto",placeholderNumberType:"MOBILE",preferredCountries:["in","us"],separateDialCode:!0,utilsScript:x};if(t.telSettings)Object.keys(t.telSettings).forEach(function(e){p[e]=t.telSettings[e]});o.value||(o.setAttribute("type","number"),o.setAttribute("onkeydown","javascript: return event.keyCode == 69 ? false : true"));var m=window.intlTelInput(o,p);o.style.paddingLeft="85px",i.style.display="block",t.pluginObj=m}return o.addEventListener("change",Qa),{colEle:s,inputElementRef:o,inputContainer:l,feedbackElementRef:i}}function Ja(e,t){var a=document.createElement("select");if(e){e.forEach||(e=e.split(","));var n=document.createElement("option");n.innerText=t||"Please select",n.value="",a.appendChild(n),e.forEach(function(e){var t=document.createElement("option"),n=e.split(":");t.value=1<n.length?n[1]:n[0],t.innerText=n[0],a.appendChild(t)})}return a}function Qa(e){if(window.KENYT_API&&window.KENYT_API.onFormInputChange){var t={event:e,state:window.KENYT_API};window.KENYT_API.onFormInputChange(t)}}function Za(e){e.push("row");for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return to.apply(void 0,[e].concat(n))}function Xa(e){var t=e;return e&&ft&&ft[e]&&(t=ft[e]),t}function eo(e){e.push("col");for(var t=arguments.length,n=Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return to.apply(void 0,[e].concat(n))}function to(e){var t=document.createElement("div");e.forEach(function(e){return t.classList.add(e)});for(var n=arguments.length,a=Array(1<n?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return a.forEach(function(e){return t.appendChild(e)}),t}function no(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){e&&!e.classList.contains("d-none")&&e.classList.add("d-none")})}function ao(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){e&&e.classList.contains("d-none")&&e.classList.remove("d-none")})}function oo(e){var t=e.inputElementRef;t&&(t.classList.contains("is-invalid")?_o(t,"is-invalid","is-valid"):t.classList.add("is-valid")),no(e.feedbackElementRef)}function io(e){var t=e.inputElementRef;t&&(t.classList.contains("is-valid")?_o(t,"is-valid","is-invalid"):t.classList.add("is-invalid")),ao(e.feedbackElementRef)}function ro(t){var n=[];return t&&"object"===(void 0===t?"undefined":a(t))&&Object.keys(t).forEach(function(e){n.push(e+"::"+t[e])}),n.join(", ")}function so(e,t){var n={type:e,value:t||null};window.parent.postMessage(n,"*")}function lo(e,t){var n={type:e,value:t||null};window.parent.postMessage(n,"*");var a=document.querySelector("#kenytInWindow").contentWindow;if(a){var o={type:Ve,value:value};a.postMessage(o,"*")}}function co(){var e=new Date,t=e.getHours()%12;return 0===t&&(t=12),t+":"+("0"+e.getMinutes()).slice(-2)+" "+(12<=e.getHours()?"PM":"AM")}function uo(e){var t=document.createElement("span");return t.classList.add("float-right","text-muted","message-timestamp"),t.innerHTML=e||co(),t}function po(e){e&&(e.scrollTop=e.scrollHeight)}function mo(e){$e&&(e&&(e=marked(e)),so(Ve.UnreadMessage,e))}function fo(e){if(e&&0<e.length){var n="";e.forEach(function(e){var t="";e.properties&&(e.properties.forEach(function(e){t+=e.property+":"+e.value+" "+(e.override?"!important":"")+";"}),n+=e.elementSelector+"{"+t+"}")}),$("<style>"+n+"</style>").appendTo("head")}}function go(){at&&0<at.length&&(console.debug("Found "+at.length+" suspended messages, sending to server now..."),at.forEach(function(e){e.invokeType?l.invoke(e.invokeType,e.botRequest):mn(e.botRequest,e.viewRef,e.displayText,e.skipHistory,e.count)}),at=[])}function vo(){var e="__feature_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function yo(e,t){var n=document.querySelector("#errorbar");if(n){e=e||"Lost connection due to inactivy. ",t||(e+=' <span class="fa fa-spin fa-spinner fa-pulse"></span>'),n.innerHTML=e;var a=new Date;if(Qe&&Qe.pageStartAt)10<(a.valueOf()-Qe.pageStartAt.valueOf())/1e3?ao(n):console.log(e)}}function ho(){var e=document.querySelector("#errorbar");e&&(no(e),e.innerHTML="")}function To(e){if(e&&!ct){for(var t=0;t<e.length;t++)e[t].UserId=Z,t===e.length-1&&(e[t].EndTime=new Date);l.invoke("TrackingUpdate",Z,te,e).done(function(e){e||Ut({message:"Tracking update returned false"},!1)}).fail(function(e){Ut({message:"Tracking update failed: "+e},!1)}),ct=!0}}function Co(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)}function Eo(e,t,n){return{event_category:e||null,event_label:t||null,value:n||null}}function bo(e,t){Na(e)&&(console.debug("Conversation language changed to "+e),fe=e,ue&&(ue.lang=e),0<me.length&&(t||pn("start conversation",null,!1,!0)),Bt("event","language_change",Eo("user_interaction",null,e)),G&&(G.textContent=e.substr(0,2).toUpperCase()))}function So(e,t){t||(t=!1);var n={UserId:Z,ConversationId:ee,BotId:m?m.BotId:0,LanguageCode:e,PreventHiMessage:t};pe.isConnected?l.invoke("ChangeChatLanguage",n):(console.warn("[Kenyt.AI] Connection not yet initiated, suspending message.."),li(n,null,!1,!0,"ChangeChatLanguage"),Ht())}function xo(e){var n=[];return e&&0<e.length&&e.forEach(function(t){if(Na(t)){var e=Oe.find(function(e){return e.value===t.trim().toLowerCase()||e.value===t.trim()});e?n.push(e):console.warn("ignoring Unknown language code: "+t)}}),n}function Io(e){var a=document.querySelector("#languageMenu");if(e&&a){for(;a.hasChildNodes();)a.removeChild(a.firstChild);if(e.length<=1)no(G);else{ao(G);var t=document.createElement("h6");t.classList.add("dropdown-header"),t.textContent="Choose language",a.appendChild(t),e.forEach(function(t){var n=document.createElement("button");n.textContent=t.displayText?t.displayText:t.text,n.addEventListener("click",function(){So(t.value);var e=Array.from(a.querySelectorAll(".dropdown-item.active"));e&&0<e.length&&e.forEach(function(e){return e.classList.remove("active")}),n.classList.add("active")}),n.classList.add("dropdown-item"),a.appendChild(n)})}}}function wo(e){e.setNewUser&&(console.debug("resetting UserId"),Z="",console.debug("resetting ConversationId"),ee="",Ua(),pn("start conversation",null,!1))}function Lo(){var e=Be+"?botId="+te,t=new XMLHttpRequest;t.open("POST",e,!0),t.setRequestHeader("Content-type","application/json");var n={IsTest:ae,SessionUserId:Z,QueryClientUserId:ne,ConversationId:"",ConversationLanguage:fe||"",TimezoneOffsetMinutes:-1*(new Date).getTimezoneOffset(),SourceUrl:oe,TriggerAutoMessage:!0,InitializeConnection:!0,ConversationContext:ie},a=JSON.stringify(n);t.onload=function(e){Vo(),Ot(e)},t.send(a)}function Mo(){var e=Y.getAttribute("data-toggle"),t=Y.querySelector("span");so(Ve.ToggleFullScreen,e),"maximize"===e?(Y.setAttribute("data-toggle","minimize"),t&&_o(t,"fa-window-maximize","fa-window-minimize")):(Y.setAttribute("data-toggle","maximize"),t&&_o(t,"fa-window-minimize","fa-window-maximize")),Ua()}function Ao(e,t,n){if(Na(e)&&Na(t)){var a=document.createElement("div"),o=document.createElement("span"),i=document.createElement("span");if(o.textContent=e,o.classList.add("persona"),i.textContent=""+t,i.classList.add("timestamp","mx-1"),"user"===e||"bot"===e){var r=document.createElement("img"),s="bot"===e?Ke:je,l="bot"===e?"bot-persona":"user-persona",d=document.createElement("span");"bot"===e?d.classList.add("fa","fa-robot"):d.classList.add("fa","fa-user"),o.textContent=s.name,o.classList.add(l),r.classList.add(l),Na(s.imageUrl)?(r.src=s.imageUrl,d.classList.add("d-none")):r.classList.add("d-none"),r.addEventListener("error",function(){r.classList.add("d-none"),console.warn("Image not found: "+imageUrl)}),15==te&&a.appendChild(d),a.appendChild(r)}a.appendChild(o),a.appendChild(i),a.classList.add("message-sender","px-3","w-100","mt-2"),n&&a.classList.add("text-right"),U.appendChild(a),We=!0}}function ja(e){return e&&"object"===(void 0===e?"undefined":a(e))&&e instanceof Date}function ko(e,t){if(ja(e)&&ja(t)){var n=Math.abs(e.valueOf()-t.valueOf());return Math.floor(n/1e3/60)}return NaN}function No(){so(Ve.ForceFullHeight)}function _o(e,t,n){return!!(e&&t&&n&&e.classList.contains(t))&&(e.classList.remove(t),e.classList.add(n),!0)}function Oo(e,t,n){if(Na(e)&&Na(t)){var a=t.match(M),o=a&&0<a.length?a[0]:null,i=void 0;o&&(t=" "+t.replace(o,"").trim());var r={name:t,imageUrl:o};if(Do(e,"bot")?(Ke=r,i="bot-persona"):Do(e,"user")&&(je=r,i="user-persona"),!n&&Na(i)){var s=Array.from(U.querySelectorAll("span."+i));Array.from(U.querySelectorAll("img."+i)).forEach(function(e){Na(r.imageUrl)?(e.src=r.imageUrl,e.classList.remove("d-none")):e.classList.add("d-none")}),s.forEach(function(e){e.textContent=r.name})}}}function Ro(e){var t=null;if(e&&e.startsWith("icon:")){var n=e.substr(5);n&&(t=document.createElement("span")).classList.add("fa","fa-"+n)}return t}function Do(e,t){return ka(e)&&ka(t)&&e.toLowerCase()===t.toLowerCase()}function Po(e){var t={};if(e)for(var n=e.split(";"),a=0;a<n.length;a++){var o=n[a];if(o){var i=o.split("=");if(1<i.length){var r=i[0].trim(),s=i[1].trim();t[r]=s}}}return t}function Bo(e,t,n){if(e){mi.sanitizeFormTemplate(e);var a=$a(e,t,n=n||en),o=wa();o.classList.add("w-95"),o.appendChild(a),oa(o),e.fields.forEach(function(e){e.afterAppend&&e.afterAppend()})}else console.warn("Invalid form"),console.warn(e)}function Uo(e){var t=[];return e&&(t=JSON.parse(e)),t}function Fo(e,t){var n=Ko(e);n.fields.forEach(function(e){e&&e.validationPattern&&Wo(e.validationPattern)&&(e.validationPattern=e.validationPattern.source)}),me.push({id:rt++,isUserMessage:!1,message:" ",messageTimestamp:co(),displayMessage:null,customMessage:{messageType:qe.Form,values:n,displayName:t}})}function Ho(){if(U)for(var e=U.childElementCount;1<e;){var t=U.lastElementChild;U.removeChild(t),e-=1}}function Vo(){me=[],Ho(),et=[],Ua()}function zo(e){return e&&"object"===(void 0===e?"undefined":a(e))}function qo(e){return e&&"function"==typeof e}function Go(e){return zo(e)&&e instanceof Array}function Wo(e){return zo(e)&&e instanceof RegExp}function jo(e){return 0===Object.keys(e).length}function Ko(t){var n=void 0;return Go(t)?(n=[],t.forEach(function(e){n.push(Ko(e))})):qo(t)||(zo(t)?(n={},Object.keys(t).forEach(function(e){n[e]=Ko(t[e])})):n=t),n}function $o(e,t){oa(Jo("⛊ You are now chatting with "+(t||e||"Agent")),"text-strip")}function Yo(e,t){oa(Jo("⛊ "+(t||e||"Agent")+" has left the conversation"),"text-strip")}function Jo(e){var t=document.createElement("span");return t.textContent=e,t}function Qo(e){if(e)for(var t=e.lastElementChild;t;)e.removeChild(t),t=e.lastElementChild}function Zo(){ue&&(ue.abort(),ue.start(),Bt("event","Button_Speech_Start",Eo("user_interaction",null,null)))}function Xo(){pn("Caller form","Contact Agent",!1,!1,!1)}function ei(){ue.stop(),Bt("event","Button_Speech_Stop",Eo("user_interaction",null,null))}function ti(e){if(window.speechSynthesis){var t=new SpeechSynthesisUtterance(e);t.lang=fe+"-IN",t.pitch=1,t.rate=1,t.volume=1,speechSynthesis.paused&&speechSynthesis.resume(),window.speechSynthesis.speak(t)}}function ni(e,t,n){var a=new Date,o=String(a.getDate()+e).padStart(2,"0"),i=String(a.getMonth()+t+1).padStart(2,"0");return a=String(a.getFullYear()+n)+"-"+i+"-"+o}function ai(){window.navigator||(window.navigator={});var e=window.navigator.userAgent.toLowerCase(),t="";t=0<=e.indexOf("windows")?"Windows":0<=e.indexOf("linux")?"Linux":0<=e.indexOf("mac")?"macOS":0<=e.indexOf("blackberry")?"BlackBerry":0<=e.indexOf("android")?"Android":0<=e.indexOf("iphone")||0<=e.indexOf("ipad")?"iOS":"unknown";var n="Desktop";return Co()&&(n="Mobile"),{Browser:window.navigator.browserInfo||"",OperatingSystem:t,Referrer:Ye.pageReferrer||"",Device:n,RawUserAgent:window.navigator.userAgent||"",PageUrl:za()||"",PageTitle:Ye.pageTitle||""}}function oi(){var e=[{field:"Name",datatype:"text",errorMessage:"please enter a valid name",isMandatory:!1,image:"icon:user"},{field:"Email",datatype:"email",errorMessage:"please enter a valid email address",validationPattern:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,10}|[0-9]{1,5})(\]?)$/,isMandatory:!1,image:"icon:envelope"},{field:"Mobile",datatype:"tel",errorMessage:"please enter a valid phone number",validationSource:S,isMandatory:!1,image:"icon:phone"}];return{title:Xa("Contact Information"),description:Xa("Please enter your contact details"),fields:e}}function ii(e){var t=void 0,n=document.querySelector("#"+e);return n&&(t=document.importNode(n.content.firstElementChild,!0)),t}function ri(){return{title:"Please upload your file(s)",description:"",fields:[{field:"File",datatype:"file",name:"file",errorMessage:"please select a valid file",isMandatory:!0,addMore:{limit:5}}],tag:"form"}}function si(e,t){var n={EventName:e,EventData:t||null};so(Ve.CustomEventDispatch,n)}function li(e,t,n,a,o,i){at||(at=[]),at.push({botRequest:e,viewRef:t,displayText:n,skipHistory:a,invokeType:o,count:i})}function di(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ci(){return new Date}function ui(e){return("0"+e).slice(-2)}function pi(){var e=document.getElementById("header-content");e.offsetWidth?(D.style.width=e.offsetWidth+"px",D.style.whiteSpace="nowrap"):window.setTimeout(function(){pi()},1e3)}var mi={getFormDetailsFromCommand:function(e){var t,n,a,o;switch(e.Name){case E.APPOINTMENT_FORM.Trigger:a=(new Date).getTimezoneOffset(),o=Math.abs(a),i={title:"Select Appointment Date and Time UTC"+(a=(a<0?"+":"-")+("00"+Math.floor(o/60)).slice(-2)+":"+("00"+o%60).slice(-2)),description:"",fields:[{field:"Appointment Date",datatype:"datetime",errorMessage:"please select a valid date",isMandatory:!0,readonly:!0,image:"icon:calendar"},{field:"Appointment Time",datatype:"dropdown",errorMessage:"please select a valid time",isMandatory:!0,value:["10 AM","11 AM","12 PM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM"],need:"Appointment Date",image:"icon:clock-o"}]},t=Uo(e.Value);break;case E.CONTACT_FORM.Trigger:n=[{field:"Name",datatype:"text",placeholder:"Your Name",errorMessage:"please enter a valid name",isMandatory:!1,image:"icon:user"},{field:"Email",datatype:"email",placeholder:"Email Address",errorMessage:"please enter a valid email address",validationPattern:/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,10}|[0-9]{1,5})(\]?)$/,isMandatory:!1,image:"icon:envelope"},{field:"Mobile",datatype:"tel",placeholder:"Mobile Number",errorMessage:"please enter a valid phone number",validationSource:S,isMandatory:!1,image:"icon:phone"}],i={title:Xa("Contact Information"),description:Xa("Please enter your contact details"),fields:n},t=Uo(e.Value);break;case E.ADDRESS_FORM.Trigger:i={title:"Address Information",description:"Please enter your address details",fields:[{field:"Address Line 1",datatype:"text",errorMessage:"please enter a valid address",isMandatory:!0},{field:"Address Line 2",datatype:"text",errorMessage:"please enter a valid address",isMandatory:!1},{field:"City",datatype:"text",errorMessage:"Please enter a valid City",isMandatory:!0,takeHalfRow:!0},{field:"State",datatype:"text",errorMessage:"please enter a valid State",isMandatory:!0,takeHalfRow:!0},{field:"Country",datatype:"text",errorMessage:"please enter a valid Country",isMandatory:!0,takeHalfRow:!0},{field:"Zip Code",datatype:"text",errorMessage:"Please enter a valid Zip Code",validationPattern:/^[1-9][0-9]{5}$/,isMandatory:!0,takeHalfRow:!0}],submit:"address form submission",submitType:"values"},t=Uo(e.Value);break;case E.GENERIC_FORM.Trigger:var i;e.Value&&(i=JSON.parse(e.Value))&&(t=Uo(i.settings))}return{template:i,setttings:t}},sanitizeFormTemplate:function(e){e&&e.fields&&e.fields.forEach(function(a){if(a.dataType&&(a.datatype=a.dataType),a.datatype)if("email"===a.datatype)a.validationPattern||(a.validationPattern=Re.EMAIL_VALIIDATION_PATTERN);else if("tel"===a.datatype)a.validationSource||(a.validationPattern=Re.PHONE_VALIDATION_SOURCE);else if("url"===a.datatype)a.validationSource||(a.validationPattern=Re.URL_VALIIDATION_PATTERN,a.antiValidationPattern=Re.EMAIL_VALIIDATION_PATTERN);else if("datetime"===a.datatype){if(a.datetimepickersettings){var t={timepicker:!1,format:"d-M-Y",minDate:"-1970/01/1",maxDate:"+1970/06/1",scrollMonth:!1,scrollInput:!1};Object.keys(t).forEach(function(e){a.datetimepickersettings[e]||(a.datetimepickersettings[e]=t[e])})}else a.datetimepickersettings={timepicker:!1,format:"d-M-Y",minDate:"-1970/01/1",maxDate:"+1970/06/1",scrollMonth:!1,scrollInput:!1};a.Slots&&(a.datetimepickersettings.beforeShowDay=function(e){var t=fi.getDateKeys(e),n=!1;return t.every(function(e){return!a.Slots[e]||(n=0<a.Slots[e].length,!1)}),[n,""]}),a.readonly=!0,a.image="icon:calendar",a.afterAppend=function(){this.inputElementRef&&($(this.inputElementRef).datetimepicker(this.datetimepickersettings),this.inputContainer&&this.datetimepickersettings&&this.datetimepickersettings.inline&&this.inputContainer.classList.add("inline-datetime"))}}})}},fi=function(){function r(e){var t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(9<t?"":"0")+t,(9<n?"":"0")+n].join("-")}return{getDateKeys:function(e){var t,n,a,o,i=[];return e&&(r(e)==r(new Date)?i.push("today"):(i.push(r(e)),i.push((a=(n=e).getMonth()+1,o=n.getDate(),["****",(9<a?"":"0")+a,(9<o?"":"0")+o].join("-"))),i.push(["****","**",(9<(t=e.getDate())?"":"0")+t].join("-")),i.push(e.getDay()))),i}}}(),gi=function(){var i=150,r="#000000ff",s="#ffffffff",l=/^#[0-9a-f]{6}$/i,d=/^#[0-9a-f]{6}$/i,c=/^#[0-9a-f]{8}$/i,u=/^rgb\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*\)$/i,p=/^rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*(\d|\d\.\d+)\s*\)$/i;function m(e){if(!e)return e;var t={red:0,green:0,blue:0,alpha:1};if(e=e.trim(),c.test(e))t.red=v(e.substr(1,2)),t.green=v(e.substr(3,2)),t.blue=v(e.substr(5,2)),t.alpha=v(e.substr(7,2));else if(l.test(e))t.red=v(e.substr(1,2)),t.green=v(e.substr(3,2)),t.blue=v(e.substr(5,2));else if(d.test(e))t.red=v(e[1]+"{"+e[1]),t.green=v(e[2]+"{"+e[2]),t.blue=v(e[3]+"{"+e[3]);else if(p.test(e)){var n=y(e," ",""),a=(n=n.substring(n.indexOf("(")+1,n.lastIndexOf(")"))).split(",");t.red=Math.min(parseInt(a[0]),255),t.green=Math.min(parseInt(a[1]),255),t.blue=Math.min(parseInt(a[2]),255),t.alpha=Math.min(parseFloat(a[3]),1)}else if(u.test(e)){var o=y(e," ",""),i=(o=o.substring(o.indexOf("(")+1,o.lastIndexOf(")"))).split(",");t.red=Math.min(parseInt(i[0]),255),t.green=Math.min(parseInt(i[1]),255),t.blue=Math.min(parseInt(i[2]),255),t.alpha=1}else console.warn("color format unsupported: "+e),t=null;return t}function f(e){return e?Math.floor(Math.sqrt(.241*e.red*e.red+.691*e.green*e.green+.068*e.blue*e.blue)):0}function g(e){if(!e)return e;return"#"+h(t(e.red),"0",2)+h(t(e.green),"0",2)+h(t(e.blue),"0",2)+h(t(e.alpha),"0",2)}function t(e){return e.toString(16)}function v(e){return parseInt("0x"+e)}function y(e,t,n){if(e&&t)for(n||(n="");0<=e.indexOf(t);)e=e.replace(t,n);return e}function h(e,t,n){return e&&t&&n&&(e=e.padStart(n,t[0])),e}function T(e,t){3==(e=e.replace(/^\s*#|\s*$/g,"")).length&&(e=e.replace(/(.)/g,"$1$1"));var n=parseInt(e.substr(0,2),16),a=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),i="#"+h((0|256+n+(256-n)*t/100).toString(16).substr(1),"0",2);return i+=h((0|256+a+(256-a)*t/100).toString(16).substr(1),"0",2),i+=h((0|256+o+(256-o)*t/100).toString(16).substr(1),"0",2)}return{getThemeSettings:function(e,t){var n=null,a=g(m(e));if(a){a=a.substr(0,7),(n={}).color=a;var o=g(m(t));n.backgroundColor=o?(o=o.substr(0,7))===a?(n.colorFrom=a,n.colorTo=o,n.backgroundGradient="linear-gradient(90deg,"+n.colorFrom+","+n.colorTo+")",n.backgroundGradientRev="linear-gradient(270deg,"+n.colorFrom+","+n.colorTo+")",a):(n.colorFrom=a,n.colorTo=o,n.backgroundGradient="linear-gradient(90deg,"+n.colorFrom+","+n.colorTo+")",n.backgroundGradientRev="linear-gradient(270deg,"+n.colorFrom+","+n.colorTo+")",""):(n.colorFrom=T(a,-30),n.colorTo=T(a,30),n.backgroundGradient="linear-gradient(90deg,"+n.colorFrom+","+n.colorTo+")",n.backgroundGradientRev="linear-gradient(270deg,"+n.colorFrom+","+n.colorTo+")",""),n.percievedBrightness=f(m(n.colorFrom)),n.percievedBrightness1=f(m(n.color)),n.percievedBrightness2=f(m(n.colorTo)),n.textColor=n.percievedBrightness<=i?s:r,n.buttonColor=(n.percievedBrightness,r),n.buttonBorderColor=(n.percievedBrightness,a),n.buttonBackgroundColor=(n.percievedBrightness,s),n.buttonColorHover=(n.percievedBrightness,s),n.buttonBackgroundColorHover=n.percievedBrightness<=i?a:"#525252"}return n},getTextColorForBackground:function(e){var t="#000000ff";if(console.debug("Background Color: "+e),!e)return t;var n=m(e);return console.debug("Normalized background color: "),console.debug(n),n&&f(n)<=150?"#ffffffff":t},setAlpha:function(e,t){if(!e||isNaN(t))return e;t=Math.floor(255*Math.min(Math.max(0,t),1));var n=m(e);return n.alpha=t,g(n)},normalizeColor:m,getPercievedBrightness:f,BRIGHTNESS_THRESHOLD:i}}(),vi={isMessageFitting:function(e,t,n){var a=!0,o=e.cloneNode(!0);if(o.getElementsByClassName(t)){var i=document.getElementById("roughMessageContainer");i.appendChild(o);var r=o.getElementsByClassName("option-pill-container");Array.prototype.forEach.call(r,function(e){var t=e.firstElementChild;t.scrollHeight>t.clientHeight&&(a=!1)}),a||(r=e.getElementsByClassName("option-pill-container"),Array.prototype.forEach.call(r,function(e){e.classList.remove(t),e.classList.add(n)})),i.removeChild(o)}return a},setFittingClassByText:function(e){var t=e.getElementsByClassName("option-pill-container");if(t&&t.length){var i=[];Array.prototype.forEach.call(t,function(e){if(e.textContent){for(var t=0,n=0;n<e.textContent.length;n++){var a=e.textContent.charAt(n);" "==a?t+=4:a==a.toLowerCase()?t+=9:t+=12}var o=1;"style3"==gt?t<=50?o=3:t<=100&&(o=2):t<=90?o=3:t<=160&&(o=2),i.push(o)}else i.push(-1)});for(var n=3,a=0;a<i.length;){for(var o=i[a],r=i[a],s=!0,l=1;l<o;l++)a+l<i.length?i[a+l]>=r||(s=!1):s&&0<a&&r==n?(o=l,l+=i[a]):s=!1;if(s){var d="option-pill-"+r;for(l=0;l<o;l++)t[a+l].classList.add(d);a+=o,r<n&&(n=r)}else i[a]=i[a]-1}}}},yi=function(){function a(){Fn("krazorpay-btn",{Title:"Transaction Completed",RemoveClick:!0,RemoveId:!0})}return{addRazorpayButton:function(t){a();var e={Title:"Make Payment",OnClick:function(e){so(Ve.OpenRazorpayForm,t),e.stopPropagation(),Wt()},ElementId:"krazorpay-btn"},n=[];n.push(e),xn({RichCards:n,Text:"Please make the payment",CardsType:Fe.SmallButton}),so(Ve.OpenRazorpayForm,t),po(B)},removeRazorpayButton:a}}();function hi(e){e.Command&&Ti({Type:"UserChat",Command:"StartCall",Data:e})}function Ti(e){so(Ve.MediaStreamingCommand,e)}function Ci(e){var t={UserId:Z||"",ConversationId:ee||"",BotClientName:te||""};l.invoke("OnMediaSignal",e,t).done().fail(function(e){console.error("Message sending failed: "+e)})}function Ei(e){e.style.height="5px",e.style.height=e.scrollHeight+"px",e.style.borderRadius="5px"}