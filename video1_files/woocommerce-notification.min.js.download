function vi_wn_b64DecodeUnicode(t){var e="";if(t)try{e=decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}catch(e){return t}return e}function viSwipeDetect(t,e){var i,o,n,s,a,c,_=t,r=e||function(t){};_.addEventListener("touchstart",function(t){t.preventDefault();let e=t.changedTouches[0];i="none",o=e.pageX,n=e.pageY,c=(new Date).getTime()},{passive:!0}),_.addEventListener("touchmove",function(t){t.preventDefault()},{passive:!0}),_.addEventListener("touchend",function(t){t.preventDefault();var e=t.changedTouches[0];s=e.pageX-o,a=e.pageY-n,(new Date).getTime()-c<=300&&(Math.abs(s)>=150&&Math.abs(a)<=100?i=s<0?"left":"right":Math.abs(a)>=150&&Math.abs(s)<=100&&(i=a<0?"up":"down")),r(i)},{passive:!0})}jQuery(document).ready(function(t){"use strict";if(t("#message-purchased").length>0){var e=woo_notification;0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect&&e.detect_address(),viSwipeDetect(document.getElementById("message-purchased"),function(e){"none"!==e&&(parseInt(woo_notification.show_close)>0&&parseInt(woo_notification.time_close)>0&&(t("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))),woo_notification.message_hide(!1,e))})}}),jQuery(window).on("load",function(){"use strict";var t=woo_notification;if(t.loop=_woocommerce_notification_params.loop,t.id=_woocommerce_notification_params.viwn_pd_id||"",t.category_name=_woocommerce_notification_params.viwn_category_name||"",t.loop_session=_woocommerce_notification_params.loop_session,t.loop_session_duration=parseFloat(_woocommerce_notification_params.loop_session_duration),t.loop_session_total=parseInt(_woocommerce_notification_params.loop_session_total),t.init_delay=parseInt(_woocommerce_notification_params.initial_delay),t.total=parseInt(_woocommerce_notification_params.notification_per_page),t.display_time=parseInt(_woocommerce_notification_params.display_time),t.next_time=parseInt(_woocommerce_notification_params.next_time),t.ajax_url=_woocommerce_notification_params.ajax_url,t.products=_woocommerce_notification_params.products||"",t.messages=_woocommerce_notification_params.messages,t.image=_woocommerce_notification_params.image,t.redirect_target=_woocommerce_notification_params.redirect_target,t.time=_woocommerce_notification_params.time,t.display_effect=_woocommerce_notification_params.display_effect,t.hidden_effect=_woocommerce_notification_params.hidden_effect,t.messages=_woocommerce_notification_params.messages,t.names=_woocommerce_notification_params.names,t.detect=_woocommerce_notification_params.detect,t.billing=_woocommerce_notification_params.billing,t.in_the_same_cate=_woocommerce_notification_params.in_the_same_cate,t.message_custom=_woocommerce_notification_params.message_custom,t.message_number_min=_woocommerce_notification_params.message_number_min,t.message_number_max=_woocommerce_notification_params.message_number_max,t.time_close=_woocommerce_notification_params.time_close,t.show_close=_woocommerce_notification_params.show_close,t.change_virtual_time=_woocommerce_notification_params.change_virtual_time,t.start_virtual_time=_woocommerce_notification_params.start_virtual_time,t.end_virtual_time=_woocommerce_notification_params.end_virtual_time,t.change_message_number=_woocommerce_notification_params.change_message_number,t.current_hour=parseInt(_woocommerce_notification_params.current_hour),0==_woocommerce_notification_params.billing&&0==_woocommerce_notification_params.detect){t.cities=[t.getCookie("wn_city")],t.country=[t.getCookie("wn_country")];var e=t.getCookie("wn_ip");e||(t.detect_address(),t.cities=[t.getCookie("wn_city")],t.country=[t.getCookie("wn_country")],e=t.getCookie("wn_ip")),e&&"undefined"!=e&&t.init()}else t.cities=_woocommerce_notification_params.cities,t.country=_woocommerce_notification_params.country,t.init()});var woo_notification={billing:0,in_the_same_cate:0,loop:0,loop_session:0,loop_session_duration:3600,loop_session_total:30,timeOutShow:0,timeOutHide:0,init_delay:5,total:30,display_time:5,next_time:60,count:0,intel:0,wn_popup:0,id:0,category_name:"",messages:"",products:"",ajax_url:"",display_effect:"",hidden_effect:"",time:"",names:"",cities:"",country:"",message_custom:"",message_number_min:"",message_number_max:"",detect:0,time_close:0,show_close:0,change_virtual_time:"",start_virtual_time:"",end_virtual_time:"",change_message_number:"",current_hour:"",gmt_offset:"",first_name_index:[],shortcodes:["{first_name}","{city}","{state}","{country}","{product}","{product_with_link}","{time_ago}","{custom}"],init:function(){if(1==this.loop&&1==this.loop_session){var t=this.getCookie("woo_notification_session"),e=Date.now(),i=this.getCookie("woo_notification_displaying");if(i)return void(this.timeOutShow=setTimeout(function(){woo_notification.init()},i-e));if(t){var o=t.split(":"),n=parseInt(o[0]),s=o[1]-e;if(n>=this.loop_session_total)return void(this.timeOutShow=setTimeout(function(){woo_notification.init()},s))}}this.ajax_url?this.ajax_get_data():setTimeout(function(){woo_notification.get_product()},1e3*this.init_delay),jQuery("#message-purchased").on("mouseenter",function(){window.clearTimeout(woo_notification.wn_popup),window.clearTimeout(woo_notification.timeOutShow),window.clearTimeout(woo_notification.timeOutHide)}).on("mouseleave",function(){woo_notification.message_show(!0)})},detect_address:function(){this.getCookie("wn_ip")||jQuery.getJSON("https://extreme-ip-lookup.com/json/",function(t){t.query&&woo_notification.setCookie("wn_ip",t.query,86400),"success"===t.status&&(t.city&&woo_notification.setCookie("wn_city",t.city,86400),t.country&&woo_notification.setCookie("wn_country",t.country,86400))})},ajax_get_data:function(){if(this.ajax_url&&!this.getCookie("woo_notification_close")){var t="",e=(new Date).getTime(),i=1e3*woo_notification.init_delay;this.id?t="&viwn_pd_id="+this.id:this.category_name&&(t="&viwn_category_name="+this.category_name),jQuery.ajax({type:"POST",data:"action=woonotification_get_product"+t,url:this.ajax_url,success:function(t){var o=JSON.parse(t);if(o&&"undefined"!=o&&o.length>0){woo_notification.products=o;let t=(new Date).getTime();(i-=t-e)>0?setTimeout(function(){woo_notification.get_product()},i):woo_notification.get_product()}},error:function(t){}})}},message_show:function(t=!1){var e=jQuery("#message-purchased");if(t||(this.count++,this.audio()),1==this.loop&&1==this.loop_session){var i=this.getCookie("woo_notification_session"),o=1,n=1e3*this.loop_session_duration,s=Date.now(),a=s+n,c=this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),!t){if(c)return window.clearTimeout(this.timeOutShow),void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},c-s));if(i){var _=i.split(":");if(o=parseInt(_[0]),n=(a=_[1])-s,o>=this.loop_session_total)return window.clearTimeout(this.timeOutShow),void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},n));o++}this.setCookieNew("woo_notification_session",a,o+":"+a,!0)}this.timeOutHide=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),this.setCookieNew("woo_notification_displaying",this.display_time+this.next_time),e.hasClass(this.hidden_effect)&&e.removeClass(this.hidden_effect),e.addClass(this.display_effect).css("display","inline-grid")}else this.wn_popup=setTimeout(function(){woo_notification.message_hide()},1e3*this.display_time),window.clearInterval(this.intel),e.hasClass(this.hidden_effect)&&e.removeClass(this.hidden_effect),e.addClass(this.display_effect).css("display","inline-grid")},message_hide:function(t=!1,e=""){var i=jQuery("#message-purchased");switch(i.hasClass(this.display_effect)&&i.removeClass(this.display_effect),e){case"left":i.addClass("bounceOutLeft"),setTimeout(function(t){t.removeClass("bounceOutLeft")},1001,i);break;case"right":i.addClass("bounceOutRight"),setTimeout(function(t){t.removeClass("bounceOutRight")},1001,i);break;case"up":i.addClass("bounceOutUp"),setTimeout(function(t){t.removeClass("bounceOutUp")},1001,i);break;case"down":i.addClass("bounceOutDown"),setTimeout(function(t){t.removeClass("bounceOutDown")},1001,i);break;default:i.addClass(this.hidden_effect)}if(i.fadeOut(1e3),!t&&!this.getCookie("woo_notification_close")){var o=this.count;if(1==this.loop)if(1==this.loop_session){var n=this.getCookie("woo_notification_session"),s=1,a=1e3*this.loop_session_duration;this.getCookie("woo_notification_displaying");if(window.clearTimeout(this.timeOutHide),window.clearTimeout(this.timeOutShow),n){var c=new Date,_=n.split(":");if(s=_[0],a=_[1]-c.getTime(),s>=this.loop_session_total)return void(this.timeOutShow=setTimeout(function(){woo_notification.get_product()},a))}this.total>o?this.timeOutShow=setTimeout(function(){woo_notification.get_product()},1e3*this.next_time):this.timeOutShow=setTimeout(function(){woo_notification.get_product()},a)}else this.total>o&&(window.clearTimeout(this.wn_popup),this.intel=setInterval(function(){woo_notification.get_product()},1e3*this.next_time));else window.clearTimeout(this.wn_popup),window.clearInterval(this.intel)}},get_time_cal:function(){return this.change_virtual_time&&this.start_virtual_time&&this.end_virtual_time?this.random(3600*this.start_virtual_time,3600*this.end_virtual_time):this.random(0,3600*this.time)},get_time_string:function(){var t=this.get_time_cal(),e=parseFloat(t/86400);return e>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_day:e+" "+_woocommerce_notification_params.str_days:(e=parseFloat(t/3600))>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_hour:e+" "+_woocommerce_notification_params.str_hours:(e=parseFloat(t/60))>1?1==(e=parseInt(e))?e+" "+_woocommerce_notification_params.str_min:e+" "+_woocommerce_notification_params.str_mins:e<10?_woocommerce_notification_params.str_few_sec:(e=parseInt(e))+" "+_woocommerce_notification_params.str_secs},get_product:function(){var t,e,i,o,n,s,a=this.products,c=this.messages,_=this.image,r=this.redirect_target;if("undefined"!=a&&a&&c&&a.length>0&&c.length>0){var m=c[s=woo_notification.random(0,c.length-1)],u=a[s=woo_notification.random(0,a.length-1)];parseInt(this.billing)>0&&parseInt(this.in_the_same_cate)<1?(t=vi_wn_b64DecodeUnicode(u.first_name),o=vi_wn_b64DecodeUnicode(u.city),e=vi_wn_b64DecodeUnicode(u.state),i=vi_wn_b64DecodeUnicode(u.country),n=u.time):(this.names&&"undefined"!=this.names?(s=woo_notification.random(0,this.names.length-1),t=vi_wn_b64DecodeUnicode(this.names[s])):t="",this.cities&&"undefined"!=this.cities?(s=woo_notification.random(0,this.cities.length-1),o=vi_wn_b64DecodeUnicode(this.cities[s])):o="",e="",i=this.country,n=this.get_time_string());var d='<span class="wn-popup-product-title">'+u.title+"</span>",f='<a class="wn-popup-product-title-with-link"';"1"===r&&(f+='target="_blank"'),f+=' href="'+u.url+'">'+u.title+"</a>";var p="<small>"+_woocommerce_notification_params.str_about+" "+n+" "+_woocommerce_notification_params.str_ago+" </small>",h=this.message_custom,l="";let g="";u.thumb?(jQuery("#message-purchased").addClass("wn-product-with-image").removeClass("wn-product-without-image"),"1"===_?(l='<a class="wn-notification-image-wrapper" ',"1"===r&&(l+='target="_blank"'),l+=' href="'+u.url+'"><img class="wn-notification-image" src="'+u.thumb+'"></a>'):l='<span class="wn-notification-image-wrapper"><img class="wn-notification-image" src="'+u.thumb+'"></span>'):jQuery("#message-purchased").addClass("wn-product-without-image").removeClass("wn-product-with-image"),g=/{number}/g,h=h.replaceAll(g,this.get_data_custom_number(u.url));let v=this.shortcodes,y=[t,o,e,i,d,f,p,h],b=m;for(var w=v.length-1;w>=0;w--)g=new RegExp(v[w],"g"),b=b.replaceAll(g,y[w]);let C="";parseInt(this.show_close)>0&&(C='<div id="notify-close"></div>');let k=l+'<p class="wn-notification-message-container">'+b+"</p>";jQuery("#message-purchased").html('<div class="message-purchase-main">'+k+"</div>"+C),this.close_notify(),woo_notification.message_show()}},get_data_custom_number:function(t){if(!this.change_message_number)return this.random(this.message_number_min,this.message_number_max);if(this.current_hour<7)return this.message_number_min;let e,i,o,n=woo_notification.getCookie("wn_data_custom_number");return(n=this.checkJson(n)?JSON.parse(n):{})[t=t.replace("&amp;","&")]?(i=n[t]-3>this.message_number_min?n[t]-3:this.message_number_min,o=n[t]+2<this.message_number_max?n[t]+2:this.message_number_max):(i=this.message_number_min,o=this.message_number_max),e=this.random(i,o),n[t]=e,n=JSON.stringify(n),woo_notification.setCookie("wn_data_custom_number",n,120),e},close_notify:function(){jQuery("#notify-close").unbind(),jQuery("#notify-close").bind("click",function(t){parseInt(woo_notification.time_close)>0?(woo_notification.message_hide(!0),jQuery("#message-purchased").unbind(),woo_notification.setCookie("woo_notification_close",1,3600*parseInt(woo_notification.time_close))):(woo_notification.message_hide(),jQuery("#message-purchased").unbind())})},audio:function(){if(jQuery("#woocommerce-notification-audio").length>0){var t=document.getElementById("woocommerce-notification-audio"),e=function(){t.play().then(function(){setTimeout(function(){t.stop()},0)}),document.removeEventListener("touchstart",e,!1)};document.addEventListener("touchstart",e,{passive:!0}),t.play()}},random:function(t,e){t=parseInt(t),e=parseInt(e);var i=Math.random()*(e-t);return Math.round(i)+t},setCookie:function(t,e,i){var o=new Date;o.setTime(o.getTime()+1e3*i);var n="expires="+o.toUTCString();document.cookie=t+"="+e+";"+n+";path=/"},setCookieNew:function(t,e,i="",o=!1){var n=new Date,s=n.getTime()+1e3*e;o&&(s=e),n.setTime(s),i||(i=s),document.cookie=t+"="+i+";expires="+n.toUTCString()+";path=/"},getCookie:function(t){for(var e=t+"=",i=document.cookie.replace(/ppviewtimer=(.*?);/g,""),o=decodeURIComponent(i).split(";"),n=0;n<o.length;n++){for(var s=o[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return""},checkJson:function(t){try{JSON.parse(t)}catch(t){return!1}return!0}};